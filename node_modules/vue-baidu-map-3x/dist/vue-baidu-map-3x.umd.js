(function(S,w){typeof exports=="object"&&typeof module!="undefined"?w(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],w):(S=typeof globalThis!="undefined"?globalThis:S||self,w(S["vue-baidu-map-3x"]={},S.Vue))})(this,function(S,w){"use strict";var Wt={"bm-map":["click","dblclick","rightclick","rightdblclick","maptypechange","mousemove","mouseover","mouseout","movestart","moving","moveend","zoomstart","zoomend","addoverlay","addcontrol","removecontrol","removeoverlay","clearoverlays","dragstart","dragging","dragend","addtilelayer","removetilelayer","load","resize","hotspotclick","hotspotover","hotspotout","tilesloaded","touchstart","touchmove","touchend","longpress"],"bm-geolocation":["locationSuccess","locationError"],"bm-overview-map":["viewchanged","viewchanging"],"bm-marker":["click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","infowindowclose","infowindowopen","dragstart","dragging","dragend","rightclick"],"bm-polyline":["click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","lineupdate"],"bm-polygon":["click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","lineupdate"],"bm-circle":["click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","lineupdate"],"bm-label":["click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","rightclick"],"bm-info-window":["close","open","maximize","restore","clickclose"],"bm-ground":["click","dblclick"],"bm-autocomplete":["onconfirm","onhighlight"],"bm-point-collection":["click","mouseover","mouseout"]};function N(t,n){const e=n||Wt[this.$options.name];e&&e.forEach(o=>{let h=o.slice(0,2)==="on"?o.slice(2):o;const i=this.$attrs["on"+h.replace(h[0],h[0].toUpperCase())];i&&t.addEventListener(o,i)})}function $(t,n={}){const{lng:e,lat:o}=n;return new t.Point(e,o)}function U(t,n={}){const{sw:e,ne:o}=n;return new t.Bounds($(t,e),$(t,o))}function P(t,n={}){const{width:e,height:o}=n;return new t.Size(e,o)}function G(t,n={}){const{url:e,size:o,opts:c={}}=n;let h={anchor:c.anchor&&P(t,c.anchor),imageSize:c.imageSize&&P(t,c.imageSize),imageOffset:c.imageOffset&&P(t,c.imageOffset),infoWindowAnchor:c.infoWindowAnchor&&P(t,c.infoWindowAnchor),printImageUrl:c.printImageUrl};return W(h),new t.Icon(e,P(t,o),h)}function Rt(t,n={}){const{content:e,opts:o}=n;let c={offset:o.offset&&P(t,o.offset),position:o.position&&$(t,o.position),enableMassClear:o.enableMassClear};return W(c),new t.Label(e,c)}function Nt(t,n={}){const{path:e,opts:o}=n;let c={anchor:o.anchor&&P(t,o.anchor),fillColor:o.fillColor,fillOpacity:o.fillOpacity,scale:o.scale,rotation:o.rotation,strokeColor:o.strokeColor,strokeOpacity:o.strokeOpacity,strokeWeight:o.strokeWeight};return W(c),new t.Symbol(window[e]||e,c)}function Dt(t,n={}){const{symbol:e,offset:o,repeat:c,fixedRotation:h}=n;return new t.IconSequence(e&&Nt(t,e),o,c,h)}const F=t=>t.lng&&t.lat,et=t=>Object.prototype.toString.call(t).slice(8,-1),A=(t,n)=>F(n)?$(t,n):n,W=t=>{Object.keys(t).forEach(n=>{typeof t[n]=="undefined"&&delete t[n]})};let q={v:"3.0",type:"API"};const nt=(t={})=>{q=Object.assign(q,t),q.ak||console.error("\u8BF7\u914D\u7F6Eak\uFF1A\u767E\u5EA6\u5730\u56FE\u5F00\u53D1\u8005\u5E73\u53F0\u7533\u8BF7\u7684\u5BC6\u94A5")},D=()=>q;var Z=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},K={exports:{}};function Y(){}Y.prototype={on:function(t,n,e){var o=this.e||(this.e={});return(o[t]||(o[t]=[])).push({fn:n,ctx:e}),this},once:function(t,n,e){var o=this;function c(){o.off(t,c),n.apply(e,arguments)}return c._=n,this.on(t,c,e)},emit:function(t){var n=[].slice.call(arguments,1),e=((this.e||(this.e={}))[t]||[]).slice(),o=0,c=e.length;for(o;o<c;o++)e[o].fn.apply(e[o].ctx,n);return this},off:function(t,n){var e=this.e||(this.e={}),o=e[t],c=[];if(o&&n)for(var h=0,i=o.length;h<i;h++)o[h].fn!==n&&o[h].fn._!==n&&c.push(o[h]);return c.length?e[t]=c:delete e[t],this}},K.exports=Y,K.exports.TinyEmitter=Y;var Ft=K.exports,J=new Ft,H={$on:(...t)=>J.on(...t),$once:(...t)=>J.once(...t),$off:(...t)=>J.off(...t),$emit:(...t)=>J.emit(...t)},j={API:{setMapStyle:"setMapStyle",NavigationControl:"NavigationControl"},WebGL:{setMapStyle:"setMapStyleV2",NavigationControl:"NavigationControl3D"}},R=(t,n)=>{const e=t.__vccOpts||t;for(const[o,c]of n)e[o]=c;return e};const jt={name:"bm-map",inheritAttrs:!1,emits:["ready","init"],props:{ak:{type:String},v:{type:String},type:{type:String},center:{type:[Object,String]},zoom:{type:Number},minZoom:{type:Number},maxZoom:{type:Number},highResolution:{type:Boolean,default:!0},mapClick:{type:Boolean,default:!0},mapType:{type:String},dragging:{type:Boolean,default:!0},scrollWheelZoom:{type:Boolean,default:!1},doubleClickZoom:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},inertialDragging:{type:Boolean,default:!0},continuousZoom:{type:Boolean,default:!0},pinchToZoom:{type:Boolean,default:!0},autoResize:{type:Boolean,default:!0},theme:{type:Array},mapStyle:{type:Object}},watch:{center(t,n){const{map:e,zoom:o}=this;et(t)==="String"&&t!==n&&e.centerAndZoom(t,o)},"center.lng"(t,n){const{BMap:e,map:o,zoom:c,center:h}=this;t!==n&&t>=-180&&t<=180&&o.centerAndZoom(new e.Point(t,h.lat),c)},"center.lat"(t,n){const{BMap:e,map:o,zoom:c,center:h}=this;t!==n&&t>=-74&&t<=74&&o.centerAndZoom(new e.Point(h.lng,t),c)},zoom(t,n){const{map:e}=this;t!==n&&t>=3&&t<=19&&e.setZoom(t)},minZoom(t){const{map:n}=this;n.setMinZoom(t)},maxZoom(t){const{map:n}=this;n.setMaxZoom(t)},highResolution(){this.reset()},mapClick(){this.reset()},mapType(t){const{map:n}=this;n.setMapType(window[t])},dragging(t){const{map:n}=this;t?n.enableDragging():n.disableDragging()},scrollWheelZoom(t){const{map:n}=this;t?n.enableScrollWheelZoom():n.disableScrollWheelZoom()},doubleClickZoom(t){const{map:n}=this;t?n.enableDoubleClickZoom():n.disableDoubleClickZoom()},keyboard(t){const{map:n}=this;t?n.enableKeyboard():n.disableKeyboard()},inertialDragging(t){const{map:n}=this;t?n.enableInertialDragging():n.disableInertialDragging()},continuousZoom(t){const{map:n}=this;t?n.enableContinuousZoom():n.disableContinuousZoom()},pinchToZoom(t){const{map:n}=this;t?n.enablePinchToZoom():n.disablePinchToZoom()},autoResize(t){const{map:n}=this;t?n.enableAutoResize():n.disableAutoResize()},theme(t){const{map:n}=this;n[j[D().type].setMapStyle]({styleJson:t})},"mapStyle.features":{handler(t,n){const{map:e,mapStyle:o}=this,{style:c,styleJson:h}=o;e[j[D().type].setMapStyle]({styleJson:h,features:t,style:c})},deep:!0},"mapStyle.style"(t,n){const{map:e,mapStyle:o}=this,{features:c,styleJson:h}=o;e[j[D().type].setMapStyle]({styleJson:h,features:c,style:t})},"mapStyle.styleJson":{handler(t,n){const{map:e,mapStyle:o}=this,{features:c,style:h}=o;e[j[D().type].setMapStyle]({styleJson:t,features:c,style:h})},deep:!0},mapStyle(t){const{map:n,theme:e}=this;!e&&n[j[D().type].setMapStyle](t)}},methods:{setMapOptions(){const{map:t,minZoom:n,maxZoom:e,mapType:o,dragging:c,scrollWheelZoom:h,doubleClickZoom:i,keyboard:r,inertialDragging:s,continuousZoom:a,pinchToZoom:p,autoResize:u}=this;n&&t.setMinZoom(n),e&&t.setMaxZoom(e),o&&t.setMapType(window[o]),c?t.enableDragging():t.disableDragging(),h?t.enableScrollWheelZoom():t.disableScrollWheelZoom(),i?t.enableDoubleClickZoom():t.disableDoubleClickZoom(),r?t.enableKeyboard():t.disableKeyboard(),s?t.enableInertialDragging():t.disableInertialDragging(),a?t.enableContinuousZoom():t.disableContinuousZoom(),p?t.enablePinchToZoom():t.disablePinchToZoom(),u?t.enableAutoResize():t.disableAutoResize()},init(t){if(this.map)return;let n=this.$refs.view;this.$slots.default;const e=new t.Map(n,{enableHighResolution:this.highResolution,enableMapClick:this.mapClick});this.map=e;const{setMapOptions:o,zoom:c,getCenterPoint:h,theme:i,mapStyle:r}=this;i?e[j[D().type].setMapStyle]({styleJson:i}):r&&e[j[D().type].setMapStyle](r),o(),N.call(this,e),e.reset(),e.centerAndZoom(h(),c);let s=0;this.$emit("init",{BMap:t,map:e}),H.$emit("init",{BMap:t,map:e}),e.addEventListener("tilesloaded",()=>{s||(s++,this.$emit("ready",{BMap:t,map:e}),H.$emit("ready",{BMap:t,map:e}))}),e.addEventListener("loaded",()=>{this.$emit("loaded",{BMap:t,map:e}),H.$emit("loaded",{BMap:t,map:e})})},getCenterPoint(){const{center:t,BMap:n}=this;switch(et(t)){case"String":return t;case"Object":return new n.Point(t.lng,t.lat);default:return new n.Point}},initMap(t){this.BMap=t,this.init(t)},getMapScript(){return window.BMap?window.BMap._preloader?window.BMap._preloader:Promise.resolve(window.BMap):(window.BMap={},window.BMap._preloader=new Promise((t,n)=>{window._initBaiduMap=function(){window.BMap=D().type=="WebGL"?window.BMapGL:window.BMap,t(window.BMap),window.document.body.removeChild(e),window.BMap._preloader=null,window._initBaiduMap=null};const e=document.createElement("script");switch(window.document.body.appendChild(e),D().type){case"WebGL":e.src=`https://api.map.baidu.com/api?v=1.0&type=webgl&ak=${D().ak}&callback=_initBaiduMap`;break;default:e.src=`https://api.map.baidu.com/api?v=${D().v}&ak=${D().ak}&callback=_initBaiduMap`}}),window.BMap._preloader)},reset(){const{getMapScript:t,initMap:n}=this;t().then(n)}},created(){const t={};this.ak&&(t.ak=this.ak),this.v&&(t.v=this.v),this.type&&(t.type=this.type),nt(t)},mounted(){this.reset()},data(){return{hasBmView:!1,map:null,BMap:null,name:"bm-map"}}},Zt={key:0,ref:"view",style:{width:"100%",height:"100%"}};function Ht(t,n,e,o,c,h){return w.openBlock(),w.createElementBlock("div",{class:w.normalizeClass(t.$attrs.class),style:w.normalizeStyle(t.$attrs.style)},[c.hasBmView?w.createCommentVNode("",!0):(w.openBlock(),w.createElementBlock("div",Zt,null,512)),w.renderSlot(t.$slots,"default")],6)}var it=R(jt,[["render",Ht]]);const Gt={control:{unload:"removeControl"},layer:{unload:"removeTileLayer"},overlay:{unload:"removeOverlay"},contextMenu:{unload:"removeContextMenu"}},Q=t=>t.abstract||t.name!=="bm-map"?Q(t.$parent):t;function Vt(){const{unload:t,renderByParent:n,$parent:e,ready:o}=this;H.$off("ready",o),n&&e.reload(),t()}class Ut{constructor(n){this.emits=["ready"],this.methods={init(){},ready(){const e=Q(this.$parent),o=this.BMap=e.BMap,c=this.map=e.map;this.load(),this.$emit("ready",{BMap:o,map:c})},transmitEvent(e){this.$emit(e.type.replace(/^on/,""),e)},reload(){this&&this.BMap&&this.$nextTick(()=>{this.unload(),this.$nextTick(this.load)})},unload(){const{map:e,originInstance:o}=this;try{switch(n.type){case"search":return o.clearResults();case"autoComplete":case"lushu":return o.dispose();case"markerClusterer":return o.clearMarkers();default:e[Gt[n.type].unload](o)}}catch{}}},this.computed={renderByParent(){return this.$parent.preventChildrenRender}},this.created=function(){const o=Q(this.$parent).map,{ready:c}=this;o?c():H.$on("ready",c),H.$on("init",this.init)},this.unmounted=Vt}}var B=t=>new Ut({type:t});const ot={name:"bm-scale",render(){},mixins:[B("control")],props:{anchor:{type:String},offset:{type:Object}},watch:{anchor(){this.reload()},offset(){this.reload()}},methods:{load(){const{BMap:t,map:n,anchor:e,offset:o}=this;this.originInstance=new t.ScaleControl({anchor:window[e],offset:o&&P(t,o)}),n.addControl(this.originInstance)}}},st={name:"bm-navigation",render(){},mixins:[B("control")],props:{anchor:{type:String},offset:{type:Object},type:{type:String},showZoomInfo:{type:Boolean},enableGeolocation:{type:Boolean,default:!1}},watch:{anchor(){this.reload()},offset(){this.reload()},type(){this.reload()},showZoomInfo(){this.reload()}},methods:{load(){const{BMap:t,map:n,anchor:e,offset:o,type:c,showZoomInfo:h,enableGeolocation:i}=this;let r={anchor:window[e],offset:o&&P(t,o),type:window[c],showZoomInfo:h,enableGeolocation:i};W(r),this.originInstance=new t[j[D().type].NavigationControl](r),n.addControl(this.originInstance)}}},at={name:"bm-map-type",render(){},mixins:[B("control")],props:["type","mapTypes","anchor","offset"],watch:{anchor(){this.reload()},offset(){this.reload()},type(){this.reload()},mapTypes(){this.reload()}},methods:{load(){const{BMap:t,map:n,anchor:e,offset:o,type:c}=this,h=[];this.mapTypes&&this.mapTypes.forEach(r=>h.push(window[r]));let i={anchor:window[e],offset:o&&P(t,o),type:window[c],mapTypes:h};W(i),this.originInstance=new t.MapTypeControl(i),n.addControl(this.originInstance)}}},rt={name:"bm-overview-map",mixins:[B("control")],render(){},props:{anchor:{type:String},offset:{type:Object},size:{type:Object},isOpen:{type:Boolean}},watch:{anchor(){this.reload()},offset(){this.reload()},size(){this.reload()},isOpen(){this.reload()}},methods:{load(){const{BMap:t,map:n,isOpen:e,size:o,offset:c,anchor:h}=this;this.mapTypes&&this.mapTypes.forEach(r=>{});let i={anchor:window[h],offset:P(t,c),size:P(t,o),isOpen:e};W(i),this.originInstance=new t.OverviewMapControl(i),N.call(this,this.originInstance),n.addControl(this.originInstance)}}},lt={name:"bm-geolocation",render(){},mixins:[B("control")],props:{anchor:{type:String},offset:{type:Object},showAddressBar:{type:Boolean},autoLocation:{type:Boolean},locationIcon:{type:Object}},watch:{anchor(){this.reload()},offset(){this.reload()},showAddressBar(){this.reload()},autoLocation(){this.reload()},locationIcon(){this.reload()}},methods:{load(){const{BMap:t,map:n,anchor:e,showAddressBar:o,autoLocation:c,locationIcon:h,offset:i}=this;let r={anchor:window[e],showAddressBar:o,enableAutoLocation:c,offset:i&&P(t,i),locationIcon:h&&G(t,h)};W(r),this.originInstance=new t.GeolocationControl(r),N.call(this,this.originInstance),n.addControl(this.originInstance)}}},ct={name:"bm-copyright",render(){},mixins:[B("control")],props:["anchor","offset","copyright"],watch:{anchor(){this.reload()},offset(){this.reload()},copyright(){this.reload()}},methods:{load(){const{BMap:t,map:n,offset:e,anchor:o,updateCopyrightList:c}=this;this.originInstance=new t.CopyrightControl({anchor:window[o],offset:e&&P(t,e)}),c(),n.addControl(this.originInstance)},updateCopyrightList(){const{BMap:t,map:n}=this,{removeCopyright:e,getCopyrightCollection:o}=this.originInstance,c=o();c&&c.forEach(h=>{e(h.id)}),this.copyright&&this.copyright.forEach(h=>{const i=h.bounds?new t.Bounds(new t.Point(h.bounds.sw.lng,h.bounds.sw.lat),new t.Point(h.bounds.ne.lng,h.bounds.ne.lat)):n.getBounds();this.originInstance.addCopyright({id:h.id,content:h.content,bounds:i})})}}},ht={name:"bm-city-list",render(){},emits:["changeBefore","changeAfter"],mixins:[B("control")],props:{anchor:{type:String},offset:{type:Object}},watch:{anchor(){this.reload()},offset(){this.reload()}},methods:{load(){const{BMap:t,map:n,anchor:e,offset:o}=this,c=this;this.originInstance=new t.CityListControl({anchor:window[e],offset:o&&P(t,o),onChangeBefore(){c.$emit("changeBefore")},onChangeAfter(){c.$emit("changeAfter")}}),n.addControl(this.originInstance)}}},pt={name:"bm-panorama",mixins:[B("control")],render(){},props:["anchor","offset"],watch:{anchor(){this.reload()},offset(){this.reload()}},methods:{load(){const{BMap:t,map:n,anchor:e,offset:o}=this;this.originInstance=new t.PanoramaControl({anchor:window[e],offset:o&&P(t,o)}),n.addControl(this.originInstance)}}},qt={name:"bm-control",mixins:[B("control")],props:["anchor","offset"],watch:{anchor(t){this.originInstance.setAnchor(t)},offset(t){this.originInstance.setOffset(t)}},methods:{load(){const{BMap:t,map:n,anchor:e,offset:o,$el:c}=this,h=function(){this.defaultAnchor=window[e||"BMAP_ANCHOR_TOP_LEFT"],this.defaultOffset=P(t,o)};h.prototype=new t.Control,h.prototype.initialize=i=>i.getContainer().appendChild(c),this.originInstance=new h(e,o),n.addControl(this.originInstance)}}};function Jt(t,n,e,o,c,h){return w.openBlock(),w.createElementBlock("div",null,[w.renderSlot(t.$slots,"default")])}var dt=R(qt,[["render",Jt]]);const Xt={name:"bm-marker",mixins:[B("overlay")],inject:["Cluster"],props:{position:{},offset:{},icon:{},massClear:{type:Boolean,default:!0},dragging:{type:Boolean,default:!1},clicking:{type:Boolean,default:!0},raiseOnDrag:{type:Boolean,default:!1},draggingCursor:{type:String},rotation:{type:Number},shadow:{type:Object},title:{type:String},label:{type:Object},animation:{type:String},top:{type:Boolean,default:!1},zIndex:{type:Number,default:0}},watch:{"position.lng"(t,n){const{BMap:e,originInstance:o,position:c,renderByParent:h,$parent:i}=this;t!==n&&t>=-180&&t<=180&&o.setPosition($(e,{lng:t,lat:c.lat})),h&&i.reload()},"position.lat"(t,n){const{BMap:e,originInstance:o,position:c,renderByParent:h,$parent:i}=this;t!==n&&t>=-74&&t<=74&&o.setPosition($(e,{lng:c.lng,lat:t})),h&&i.reload()},"offset.width"(t,n){const{BMap:e,originInstance:o}=this;t!==n&&o.setOffset(new e.Size(t,this.offset.height))},"offset.height"(t,n){const{BMap:e,originInstance:o}=this;t!==n&&o.setOffset(new e.Size(this.offset.width,t))},icon:{deep:!0,handler(t){const{BMap:n,originInstance:e,rotation:o}=this;e&&e.setIcon(G(n,t)),o&&e&&e.setRotation(o)}},massClear(t){t?this.originInstance.enableMassClear():this.originInstance.disableMassClear()},dragging(t){t?this.originInstance.enableDragging():this.originInstance.disableDragging()},clicking(){this.reload()},raiseOnDrag(){this.reload()},draggingCursor(t){this.originInstance.setDraggingCursor(t)},rotation(t){this.originInstance.setRotation(t)},shadow(t){this.originInstance.setShadow(t)},title(t){this.originInstance.setTitle(t)},label(t){this.reload()},animation(t){this.originInstance.setAnimation(window[t])},top(t){this.originInstance.setTop(t)},zIndex(t){this.originInstance.setZIndex(t)}},methods:{load(){var x;const{BMap:t,map:n,position:e,offset:o,icon:c,massClear:h,dragging:i,clicking:r,raiseOnDrag:s,draggingCursor:a,rotation:p,shadow:u,title:g,label:l,animation:f,top:y,renderByParent:v,$parent:m,zIndex:I}=this;let O={offset:o,icon:c&&G(t,c),enableMassClear:h,enableDragging:i,enableClicking:r,raiseOnDrag:s,draggingCursor:a,rotation:p,shadow:u,title:g};W(O);const T=new t.Marker(new t.Point(e.lng,e.lat),O);this.originInstance=T,l&&T&&T.setLabel(Rt(t,l)),T.setTop(y),T.setZIndex(I),N.call(this,T),v?m.reload():n.addOverlay(T),T.setAnimation(window[f]),(x=this.Cluster)==null||x.addMaker(this)}},beforeUnmount(){var t;(t=this.Cluster)==null||t.removeMaker(this)}};function Kt(t,n,e,o,c,h){return w.openBlock(),w.createElementBlock("div",null,[w.renderSlot(t.$slots,"default")])}var ut=R(Xt,[["render",Kt]]);const mt={render(){},name:"bm-point-collection",mixins:[B("overlay")],props:{points:{type:Array,default(){return[]}},shape:{type:String,default:"BMAP_POINT_SHAPE_CIRCLE"},color:{type:String},size:{type:String,default:"BMAP_POINT_SIZE_NORMAL"}},watch:{shape(t){const{originInstance:n,color:e,size:o}=this;n.setStyles({shape:window[t],color:e,size:window[o]})},size(t){const{originInstance:n,color:e,shape:o}=this;n.setStyles({shape:window[o],color:e,size:window[t]})},color(t){const{originInstance:n,shape:e,size:o}=this;n.setStyles({shape:window[e],color:t,size:window[o]})},points:{deep:!0,handler(t){const{originInstance:n}=this;n.clear(),n.setPoints(t)}}},methods:{load(){},init({BMap:t,map:n}){this.$emit("init",{BMap:t,map:n});const{points:e,shape:o,color:c,size:h}=this;let i={shape:window[o],color:c,size:window[h]};W(i);const r=this.originInstance=new t.PointCollection(e.map(s=>$(t,s)),i);N.call(this,r),n.addOverlay(r)}}},gt={name:"bm-polyline",render(){},mixins:[B("overlay")],props:{path:{type:Array},strokeColor:{type:String,default:"blue"},strokeWeight:{type:Number,default:2},strokeOpacity:{type:Number,default:.5},strokeStyle:{type:String,default:"solid"},massClear:{type:Boolean,default:!0},clicking:{type:Boolean,default:!0},editing:{type:Boolean,default:!1},icons:{type:Array,default(){return[]}}},watch:{path:{handler(t,n){this.reload()},deep:!0},icons:{handler(t,n){this.reload()},deep:!0},strokeColor(t){this.originInstance.setStrokeColor(t)},strokeOpacity(t){this.originInstance.setStrokeOpacity(t)},strokeWeight(t){this.originInstance.setStrokeWeight(t)},strokeStyle(t){this.originInstance.setStrokeStyle(t)},editing(t){t?this.originInstance.enableEditing():this.originInstance.disableEditing()},massClear(t){t?this.originInstance.enableMassClear():this.originInstance.disableMassClear()},clicking(t){this.reload()}},computed:{iconSequences(){const{BMap:t,icons:n}=this;return n.map(e=>Dt(t,e))}},methods:{load(){const{BMap:t,map:n,path:e,strokeColor:o,strokeWeight:c,strokeOpacity:h,strokeStyle:i,editing:r,massClear:s,clicking:a,iconSequences:p}=this;let u={strokeColor:o,strokeWeight:c,strokeOpacity:h,strokeStyle:i,enableEditing:r,enableMassClear:s,enableClicking:a,icons:p};W(u);const g=new t.Polyline(e.map(l=>$(t,{lng:l.lng,lat:l.lat})),u);this.originInstance=g,n.addOverlay(g),N.call(this,g)}}},tt={name:"bm-polygon",render(){},mixins:[B("overlay")],props:{path:{type:Array,default(){return[]}},strokeColor:{type:String},strokeWeight:{type:Number},strokeOpacity:{type:Number},strokeStyle:{type:String},fillColor:{type:String},fillOpacity:{type:Number},massClear:{type:Boolean,default:!0},clicking:{type:Boolean,default:!0},editing:{type:Boolean,default:!1}},watch:{path:{handler(t,n){this.reload()},deep:!0},strokeColor(t){this.originInstance.setStrokeColor(t)},strokeOpacity(t){this.originInstance.setStrokeOpacity(t)},strokeWeight(t){this.originInstance.setStrokeWeight(t)},strokeStyle(t){this.originInstance.setStrokeStyle(t)},fillColor(t){this.originInstance.setFillColor(t)},fillOpacity(t){this.originInstance.setFillOpacity(t)},editing(t){t?this.originInstance.enableEditing():this.originInstance.disableEditing()},massClear(t){t?this.originInstance.enableMassClear():this.originInstance.disableMassClear()},clicking(t){this.reload()}},methods:{load(){const{BMap:t,map:n,path:e,strokeColor:o,strokeWeight:c,strokeOpacity:h,strokeStyle:i,fillColor:r,fillOpacity:s,editing:a,massClear:p,clicking:u}=this;let g={strokeColor:o,strokeWeight:c,strokeOpacity:h,strokeStyle:i,fillColor:r,fillOpacity:s,enableMassClear:p,enableClicking:u};W(g);const l=new t.Polygon(e.map(f=>$(t,{lng:f.lng,lat:f.lat})),g);this.originInstance=l,n.addOverlay(l),N.call(this,l),a?l.enableEditing():l.disableEditing()}}},ft={name:"bm-circle",render(){},mixins:[B("overlay")],props:{center:{},radius:{},strokeColor:{type:String},strokeWeight:{type:Number},strokeOpacity:{type:Number},strokeStyle:{type:String},fillColor:{type:String},fillOpacity:{type:Number},massClear:{type:Boolean,default:!0},clicking:{type:Boolean,default:!0},editing:{type:Boolean,default:!1}},watch:{"center.lng"(t,n){const{BMap:e,originInstance:o,isEditing:c,disableEditing:h,enableEditing:i,center:r,editing:s}=this;if(!c){h();const a=t;t.toString()!==n.toString()&&a>=-180&&a<=180&&o.setCenter($(e,{lng:a,lat:r.lat})),s&&i()}},"center.lat"(t,n){const{BMap:e,originInstance:o,isEditing:c,disableEditing:h,enableEditing:i,center:r,editing:s}=this;if(!c){h();const a=t;t.toString()!==n.toString()&&a>=-74&&a<=74&&o.setCenter($(e,{lng:r.lng,lat:a})),s&&i()}},radius(t,n){const{originInstance:e,isEditing:o,disableEditing:c,enableEditing:h,editing:i}=this;o||(c(),e.setRadius(t),i&&h())},strokeColor(t){this.originInstance.setStrokeColor(t)},strokeOpacity(t){this.originInstance.setStrokeOpacity(t)},strokeWeight(t){this.originInstance.setStrokeWeight(t)},strokeStyle(t){this.originInstance.setStrokeStyle(t)},fillColor(t){this.originInstance.setFillColor(t)},fillOpacity(t){this.originInstance.setFillOpacity(t)},editing(t){t?this.enableEditing():this.disableEditing()},massClear(t){t?this.originInstance.enableMassClear():this.originInstance.disableMassClear()},clicking(t){this.reload()}},methods:{dragStartHandler(){this.isEditing=!0},dragEndHandler(){this.isEditing=!1,this.bindEditingNodeEvents()},bindEditingNodeEvents(){const{originInstance:t,editingKey:n,dragStartHandler:e,dragEndHandler:o}=this;t[n].forEach(c=>{c.addEventListener("dragstart",e),c.addEventListener("dragend",o)})},enableEditing(){const{originInstance:t,bindEditingNodeEvents:n}=this;t.enableEditing(),n()},disableEditing(){const{originInstance:t}=this;t.disableEditing()},getEditingKey(t){const n=[];t.enableEditing(),setTimeout(()=>{for(const e in t)t[e]&&t[e].length===2&&n.push(e);t.disableEditing();for(const e in t)t[e]&&t[e].length===0&&~n.indexOf(e)&&(this.editingKey=e)},0)},load(){const{BMap:t,map:n,center:e,radius:o,strokeColor:c,strokeWeight:h,strokeOpacity:i,strokeStyle:r,fillColor:s,fillOpacity:a,editing:p,massClear:u,clicking:g,enableEditing:l,disableEditing:f,getEditingKey:y,editingKey:v}=this;let m={strokeColor:c,strokeWeight:h,strokeOpacity:i,strokeStyle:r,fillColor:s,fillOpacity:a,enableMassClear:u,enableClicking:g};W(m);const I=new t.Circle($(t,{lng:e.lng,lat:e.lat}),o,m);this.originInstance=I,n.addOverlay(I),N.call(this,I),!v&&y(I),setTimeout(()=>{p?l():f()},0)}}},yt={name:"bm-ground",render(){},mixins:[B("overlay")],props:{bounds:{type:Object},opacity:{type:Number},imageURL:{type:String},displayOnMinLevel:{type:Number},displayOnMaxLevel:{type:Number}},watch:{bounds:{handler(t){const{BMap:n}=this;this.originInstance.setBounds(U(n,t))},deep:!0},opacity(t){this.originInstance.setOpacity(t)},imageURL(t){this.originInstance.setImageURL(t)},displayOnMinLevel(t){this.originInstance.setDisplayOnMinLevel(t)},displayOnMaxLevel(t){this.originInstance.setDisplayOnMaxLevel(t)}},methods:{load(){const{BMap:t,map:n,bounds:e,opacity:o,imageURL:c,displayOnMinLevel:h,displayOnMaxLevel:i}=this;let r={opacity:o,imageURL:c,displayOnMaxLevel:i,displayOnMinLevel:h};W(r);const s=new t.GroundOverlay(e&&U(t,e),r);s.setImageURL(c),this.originInstance=s,N.call(this,s),n.addOverlay(s)}}},_t={name:"bm-label",render(){},mixins:[B("overlay")],props:{content:{type:String},title:{type:String},offset:{},position:{},labelStyle:{},zIndex:{type:Number,default:0},massClear:{type:Boolean,default:!0}},watch:{content(t){this.originInstance.setContent(t)},title(t){this.originInstance.setTitle(t)},"offset.width"(t,n){const{BMap:e}=this;t.toString()!==n.toString()&&this.originInstance.setOffset(P(e,{width:t,height:this.offset.height}))},"offset.height"(t,n){const{BMap:e}=this;t.toString()!==n.toString()&&this.originInstance.setOffset(P(e,{width:this.offset.width,height:t}))},"position.lng"(t,n){const{BMap:e}=this,o=t;t.toString()!==n.toString()&&o>=-180&&o<=180&&this.originInstance.setCenter($(e,{lng:o,lat:this.center.lat}))},"position.lat"(t,n){const{BMap:e}=this,o=t;t.toString()!==n.toString()&&o>=-74&&o<=74&&this.originInstance.setCenter($(e,{lng:this.center.lng,lat:o}))},labelStyle:{handler(t){this.originInstance.setStyle(t)},deep:!0},zIndex(t){this.originInstance.setZIndex(t)},massClear(t){t?this.originInstance.enableMassClear():this.originInstance.disableMassClear()}},methods:{load(){const{BMap:t,map:n,content:e,title:o,offset:c,position:h,labelStyle:i,zIndex:r,massClear:s,$parent:a}=this;let p={offset:P(t,c),position:$(t,h),enableMassClear:s};W(p);const u=new t.Label(e,p);this.originInstance=u;try{a.originInstance.setLabel(u)}catch{n.addOverlay(u)}o&&u.setTitle(o),i&&u.setStyle(i),r&&u.setZIndex(r),N.call(this,u)}}},Yt={name:"bm-info-window",mixins:[B("overlay")],props:{show:{type:Boolean},position:{type:Object},title:{type:String},width:{type:Number},height:{type:Number},maxWidth:{type:Number},offset:{type:Object},maximize:{type:Boolean},autoPan:{type:Boolean},closeOnClick:{type:Boolean,default:!0},message:{type:String}},watch:{show(t){t?this.openInfoWindow():this.closeInfoWindow()},"position.lng"(t,n){this.reload()},"position.lat"(t,n){this.reload()},"offset.width"(t,n){this.reload()},"offset.height"(t){this.reload()},maxWidth(){this.reload()},width(t){this.originInstance.setWidth(t)},height(t){this.originInstance.setHeight(t)},title(t){this.originInstance.setTitle(t)},maximize(t){t?this.originInstance.enableMaximize():this.originInstance.disableMaximize()},autoPan(t){t?this.originInstance.enableAutoPan():this.originInstance.disableAutoPan()},closeOnClick(t){t?this.originInstance.enableCloseOnClick():this.originInstance.disableCloseOnClick()}},methods:{redraw(){this.originInstance.redraw()},load(){const{BMap:t,map:n,show:e,title:o,width:c,height:h,maxWidth:i,offset:r,autoPan:s,closeOnClick:a,message:p,maximize:u,bindObserver:g,$parent:l}=this,f=this.$el;let y={width:c,height:h,title:o,maxWidth:i,offset:r&&P(t,r),enableAutoPan:s,enableCloseOnClick:a,enableMessage:typeof p=="undefined",message:p};W(y);const v=new t.InfoWindow(f,y);u?v.enableMaximize():v.disableMaximize(),N.call(this,v),this.originInstance=v,v.redraw(),[].forEach.call(f.querySelectorAll("img"),m=>{m.onload=()=>v.redraw()}),g(),this.$container=l.originInstance&&l.originInstance.openInfoWindow?l.originInstance:n,e&&this.openInfoWindow()},bindObserver(){const t=window.MutationObserver;if(!t)return;const{$el:n,originInstance:e}=this;this.observer=new t(o=>e.redraw()),this.observer.observe(n,{attributes:!0,childList:!0,characterData:!0,subtree:!0})},openInfoWindow(){const{BMap:t,$container:n,position:e,originInstance:o}=this;n.openInfoWindow(o,$(t,e||this.$parent.position))},closeInfoWindow(){this.$container.closeInfoWindow(this.originInstance)}}};function Qt(t,n,e,o,c,h){return w.withDirectives((w.openBlock(),w.createElementBlock("div",null,[w.renderSlot(t.$slots,"default")],512)),[[w.vShow,e.show]])}var vt=R(Yt,[["render",Qt]]);const te={name:"bm-overlay",emits:["initialize","draw"],mixins:[B("overlay")],props:{pane:{type:String}},watch:{pane(){this.reload()}},methods:{load(){const{BMap:t,map:n,$el:e,pane:o}=this,c=this.$emit.bind(this);class h extends t.Overlay{initialize(){c("initialize",{BMap:t,map:n,el:e,overlay:this});try{n.getPanes()[o].appendChild(e)}catch{}return e}draw(){c("draw",{BMap:t,map:n,el:e,overlay:this})}}const i=new h;this.originInstance=i,n.addOverlay(i)}}};function ee(t,n,e,o,c,h){return w.openBlock(),w.createElementBlock("div",null,[w.renderSlot(t.$slots,"default")])}var bt=R(te,[["render",ee]]);const ne={name:"bm-context-menu",props:{width:{type:Number}},mixins:[B("contextMenu")],methods:{load(){const{width:t,BMap:n,map:e,$parent:o}=this,c=this.parent=o.originInstance||e;this.originInstance&&c.removeContextMenu(this.originInstance);const h=this.originInstance=new n.ContextMenu;if(this.$slots.default)for(const i of this.$slots.default()||[]){const r=i.props;if(r.seperator){h.addSeparator();continue}const s=new n.MenuItem(r.text,function(a,p){r.callback&&r.callback({point:a,pixel:p,BMap:n,map:e,target:c})},{width:t,id:r.id,iconUrl:r.iconUrl});r.disabled?s.disable():s.enable(),r.originInstance=s,h.addItem(s)}c.addContextMenu(h)}}};function ie(t,n,e,o,c,h){return w.openBlock(),w.createElementBlock("div",null,[w.renderSlot(t.$slots,"default")])}var wt=R(ne,[["render",ie]]);const oe={name:"bm-context-menu-item",props:{callback:{type:Function,default:function(){}},text:{type:String},iconUrl:{type:String},id:{type:String},disabled:{type:Boolean},seperator:{type:Boolean},originInstance:{}},methods:{reload(){this.$parent.map&&this.$parent.load()}},watch:{text(){this.reload()},iconUrl(){this.reload()},id(){this.reload()},disabled(){this.reload()},iseperator(){this.reload()},callback(){this.reload()}},destroyed(){this.reload()},mounted(){this.reload()}};function se(t,n,e,o,c,h){return w.openBlock(),w.createElementBlock("span",null,[w.renderSlot(t.$slots,"default")])}var Ct=R(oe,[["render",se]]);const ae={name:"bm-local-search",emits:["markersset","infohtmlset","resultshtmlset","searchcomplete"],mixins:[B("search")],props:{location:{type:[Object,String]},keyword:{type:[Array,String]},panel:{type:Boolean,default:!0},forceLocal:{type:Boolean},customData:{type:Object},bounds:{type:Object},nearby:{type:Object},pageCapacity:{type:Number},autoViewport:{type:Boolean},selectFirstResult:{type:Boolean}},watch:{location:{handler(t){const{originInstance:n,search:e}=this;n.setLocation(t||this.map),e()},deep:!0},keyword(){this.search()},bounds:{handler(t){const{searchInBounds:n}=this;n(t)},deep:!0},nearby:{handler(t){const{searchNearby:n}=this;n(t)},deep:!0},forceLocal(){this.reload()},customData:{deep:!0,handler(){this.reload()}},pageCapacity(t){this.originInstance&&this.originInstance.setPageCapacity(t)},autoViewport(t){this.originInstance&&(t?this.originInstance.enableAutoViewport():this.originInstance.disableAutoViewport())},selectFirstResult(t){this.originInstance&&(t?this.originInstance.enableFirstResultSelection():this.originInstance.disableFirstResultSelection())},highlightMode(){this.reload()}},methods:{searchNearby(t){const{originInstance:n,keyword:e,customData:o,BMap:c}=this;n.searchNearby(e,$(c,t.center),t.radius,o)},searchInBounds(t){const{originInstance:n,keyword:e,customData:o,BMap:c}=this;n.searchInBounds(e,U(c,t),o)},search(){const{originInstance:t,keyword:n,forceLocal:e,customData:o,nearby:c,bounds:h,searchNearby:i,searchInBounds:r}=this;c?i(c):h?r(h):t.search(n,{forceLocal:e,customData:o})},load(){const t=this,{map:n,BMap:e,search:o,pageCapacity:c,autoViewport:h,selectFirstResult:i,highlightMode:r,location:s,originInstance:a}=this,p=s?F(s)?$(e,s):s:n,u=this.originInstance=new e.LocalSearch(p,{onMarkersSet(g){t.$emit("markersset",g)},onInfoHtmlSet(g){t.$emit("infohtmlset",g)},onResultsHtmlSet(g){t.$emit("resultshtmlset",g)},onSearchComplete(g){a&&a!==u&&a.clearResults(),t.$emit("searchcomplete",g)},pageCapacity:c,renderOptions:{map:n,panel:this.$el,selectFirstResult:i,autoViewport:h,highlightMode:r}});o()}}};function re(t,n,e,o,c,h){return w.withDirectives((w.openBlock(),w.createElementBlock("div",null,[w.renderSlot(t.$slots,"default")],512)),[[w.vShow,e.panel]])}var kt=R(ae,[["render",re]]);const le={name:"bm-transit",emits:["searchcomplete","markersset","infohtmlset","polylinesset","resultshtmlset"],mixins:[B("search")],props:{location:{type:[Object,String]},start:{type:[Object,String]},end:{type:[Object,String]},panel:{type:Boolean,default:!0},policy:{type:String},pageCapacity:{type:Number},autoViewport:{type:Boolean},selectFirstResult:{type:Boolean}},watch:{location:{handler(t){const{originInstance:n,map:e}=this;n.setLocation(t||e)},deep:!0},start:{handler(t){const{originInstance:n,end:e,BMap:o}=this;n.search(A(o,t),A(o,e))},deep:!0},end:{handler(t){const{originInstance:n,start:e,BMap:o}=this;n.search(A(o,e),A(o,t))},deep:!0},panel(){this.reload()},policy(t){this.originInstance.setPolicy(window[t])},pageCapacity(t){this.originInstance&&this.originInstance.setPageCapacity(t)},autoViewport(t){this.originInstance&&(t?this.originInstance.enableAutoViewport():this.originInstance.disableAutoViewport())},selectFirstResult(){this.reload()},highlightMode(){this.reload()}},methods:{search(t,n){const{originInstance:e}=this;e.search(t,n)},load(){const t=this,{map:n,BMap:e,location:o,policy:c,pageCapacity:h,selectFirstResult:i,autoViewport:r,highlightMode:s,search:a,start:p,end:u,originInstance:g}=this,l=o?F(o)?$(e,o):o:n,f=this.originInstance=new e.TransitRoute(l,{renderOptions:{map:n,panel:this.$el,selectFirstResult:i,autoViewport:r,highlightMode:s},policy:window[c],pageCapacity:h,onSearchComplete(y){g&&g!==f&&g.clearResults(),t.$emit("searchcomplete",y)},onMarkersSet(y){t.$emit("markersset",y)},onInfoHtmlSet(y){t.$emit("infohtmlset",y)},onPolylinesSet(y){t.$emit("polylinesset",y)},onResultsHtmlSet(y){t.$emit("resultshtmlset",y)}});a(F(p)?$(e,p):p,F(u)?$(e,u):u)}}};function ce(t,n,e,o,c,h){return w.withDirectives((w.openBlock(),w.createElementBlock("div",null,[w.renderSlot(t.$slots,"default")],512)),[[w.vShow,e.panel]])}var It=R(le,[["render",ce]]);const he={name:"bm-walking",emits:["searchcomplete","markersset","infohtmlset","polylinesset","resultshtmlset"],mixins:[B("search")],props:{location:{type:[Object,String]},start:{type:[Object,String]},end:{type:[Object,String]},panel:{type:Boolean,default:!0},pageCapacity:{type:Number},autoViewport:{type:Boolean},selectFirstResult:{type:Boolean}},watch:{location:{handler(t){const{originInstance:n,map:e}=this;n.setLocation(t||e)},deep:!0},start:{handler(t){const{originInstance:n,end:e,BMap:o}=this;n.search(A(o,t),A(o,e))},deep:!0},end:{handler(t){const{originInstance:n,start:e,BMap:o}=this;n.search(A(o,e),A(o,t))},deep:!0},panel(){this.reload()},autoViewport(t){this.reload()},selectFirstResult(t){this.reload()},highlightMode(){this.reload()}},methods:{search(t,n){const{originInstance:e}=this;e.search(t,n)},load(){const t=this,{map:n,BMap:e,location:o,selectFirstResult:c,autoViewport:h,highlightMode:i,search:r,start:s,end:a,originInstance:p}=this,u=o?F(o)?$(e,o):o:n,g=this.originInstance=new e.WalkingRoute(u,{renderOptions:{map:n,panel:this.$el,selectFirstResult:c,autoViewport:h,highlightMode:i},onSearchComplete(l){p&&p!==g&&p.clearResults(),t.$emit("searchcomplete",l)},onMarkersSet(l){t.$emit("markersset",l)},onInfoHtmlSet(l){t.$emit("infohtmlset",l)},onPolylinesSet(l){t.$emit("polylinesset",l)},onResultsHtmlSet(l){t.$emit("resultshtmlset",l)}});r(F(s)?$(e,s):s,F(a)?$(e,a):a)}}};function pe(t,n,e,o,c,h){return w.withDirectives((w.openBlock(),w.createElementBlock("div",null,[w.renderSlot(t.$slots,"default")],512)),[[w.vShow,e.panel]])}var St=R(he,[["render",pe]]);const de={name:"bm-driving",emits:["searchcomplete","markersset","infohtmlset","polylinesset","resultshtmlset"],mixins:[B("search")],props:{location:{type:[Object,String]},start:{type:[Object,String]},end:{type:[Object,String]},startCity:{type:[String,Number]},endCity:{type:[String,Number]},waypoints:{type:Array},policy:{type:String},panel:{type:Boolean,default:!0},autoViewport:{type:Boolean},selectFirstResult:{type:Boolean}},watch:{location:{handler(t){const{originInstance:n,map:e}=this;n.setLocation(t||e)},deep:!0},start:{handler(t){const{originInstance:n,end:e,startCity:o,endCity:c,waypoints:h,BMap:i,getWaypoints:r}=this;n.search(A(i,t),A(i,e),{startCity:o,endCity:c,waypoints:r(h)})},deep:!0},end:{handler(t){const{originInstance:n,start:e,startCity:o,endCity:c,waypoints:h,BMap:i,getWaypoints:r}=this;n.search(A(i,e),A(i,t),{startCity:o,endCity:c,waypoints:r(h)})},deep:!0},startCity(t){const{originInstance:n,start:e,end:o,endCity:c,waypoints:h,getWaypoints:i}=this;n.search(e,o,{val:t,endCity:c,waypoints:i(h)})},endCity(t){const{originInstance:n,start:e,end:o,startCity:c,waypoints:h,getWaypoints:i}=this;n.search(e,o,{startCity:c,val:t,waypoints:i(h)})},waypoints:{handler(t){const{originInstance:n,start:e,end:o,startCity:c,endCity:h,getWaypoints:i}=this;n.search(e,o,{startCity:c,endCity:h,waypoints:i(t)})},deep:!0},panel(){this.reload()},policy(t){this.reload()},autoViewport(){this.reload()},selectFirstResult(){this.reload()},highlightMode(){this.reload()}},methods:{search(t,n,{startCity:e,endCity:o,waypoints:c}){const{originInstance:h,getWaypoints:i}=this;h.search(t,n,{startCity:e,endCity:o,waypoints:i(c)})},getWaypoints(t){const{BMap:n}=this;if(t)return t.map(e=>A(n,e))},load(){const t=this,{map:n,BMap:e,location:o,policy:c,selectFirstResult:h,autoViewport:i,highlightMode:r,search:s,start:a,end:p,startCity:u,endCity:g,waypoints:l,originInstance:f,getWaypoints:y}=this,v=o?F(o)?$(e,o):o:n,m=this.originInstance=new e.DrivingRoute(v,{renderOptions:{map:n,panel:this.$el,selectFirstResult:h,autoViewport:i,highlightMode:r},policy:window[c],onSearchComplete(I){f&&f!==m&&f.clearResults(),t.$emit("searchcomplete",I)},onMarkersSet(I){t.$emit("markersset",I)},onInfoHtmlSet(I){t.$emit("infohtmlset",I)},onPolylinesSet(I){t.$emit("polylinesset",I)},onResultsHtmlSet(I){t.$emit("resultshtmlset",I)}});s(A(e,a),A(e,p),{startCity:u,endCity:g,waypoints:y(l)})}}};function ue(t,n,e,o,c,h){return w.withDirectives((w.openBlock(),w.createElementBlock("div",null,[w.renderSlot(t.$slots,"default")],512)),[[w.vShow,e.panel]])}var Mt=R(de,[["render",ue]]);const me={name:"bm-bus",emits:["getbuslistcomplete","getbuslinecomplete","buslisthtmlset","buslinehtmlset","markersset","polylinesset"],mixins:[B("search")],props:{location:{type:[Object,String]},keyword:{type:String},panel:{type:Boolean,default:!0},pageCapacity:{type:Number},autoViewport:{type:Boolean},selectFirstResult:{type:Boolean}},watch:{location:{handler(t){const{originInstance:n,map:e}=this;n.setLocation(t||e)},deep:!0},keyword(t){this.search(t)},panel(){this.reload()},autoViewport(t){this.reload()},selectFirstResult(t){this.reload()}},methods:{search(t){const{originInstance:n}=this;n.getBusList(t)},load(){const t=this,{location:n,selectFirstResult:e,autoViewport:o,highlightMode:c,keyword:h,search:i,BMap:r,map:s,originInstance:a}=this,p=n?F(n)?$(r,n):n:s,u=this.originInstance=new r.BusLineSearch(p,{renderOptions:{map:s,panel:this.$el,selectFirstResult:e,autoViewport:o,highlightMode:c},onGetBusListComplete(g){a&&a!==u&&a.clearResults(),t.$emit("getbuslistcomplete",g)},onGetBusLineComplete(g){a&&a!==u&&a.clearResults(),t.$emit("getbuslinecomplete",g)},onBusListHtmlSet(g){t.$emit("buslisthtmlset",g)},onBusLineHtmlSet(g){t.$emit("buslinehtmlset",g)},onMarkersSet(g){t.$emit("markersset",g)},onPolylinesSet(g){t.$emit("polylinesset",g)}});i(h)}}};function ge(t,n,e,o,c,h){return w.withDirectives((w.openBlock(),w.createElementBlock("div",null,null,512)),[[w.vShow,e.panel]])}var Bt=R(me,[["render",ge]]);const xt={name:"bm-tile",render(t){},mixins:[B("layer")],props:{transparentPng:{type:Boolean},tileUrlTemplate:{type:String},copyright:{},zIndex:{type:Number}},watch:{transparentPng(){this.reload()},tileUrlTemplate(){this.reload()},copyright(){this.reload()},zIndex(){this.reload()}},methods:{load(){const{BMap:t,map:n,transparentPng:e,tileUrlTemplate:o,copyright:c,zIndex:h}=this;this.originInstance=new t.TileLayer({transparentPng:e,tileUrlTemplate:o,copyright:c&&{id:c.id,content:c.content,bounds:c.bounds&&U(c.bounds)},zIndex:h}),n.addTileLayer(this.originInstance)}}},Ot={name:"bm-triffic",render(t){},mixins:[B("layer")],props:{predictDate:{type:Object}},watch:{"pridictDate.weekday"(){this.reload()},"pridictDate.hour"(){this.reload()},pridictDate(){this.reload()}},methods:{load(){const{pridictDate:t,BMap:n,map:e}=this;this.originInstance=new n.TrafficLayer({pridictDate:t}),e.addTileLayer(this.originInstance)}}},fe={mixins:[B("abstract")],emits:["click","dblclick","mousedown","mouseup","mouseout","mouseover","remove"],props:["name","strokeColor","strokeWeight","strokeOpacity","strokeStyle","fillColor","fillOpacity","massClear","clicking"],data(){return{paths:[]}},components:{BmPolygon:tt},watch:{name(){this.reload()}},methods:{load(){const{BMap:t,name:n}=this;new t.Boundary().get(n,o=>{this.paths=o.boundaries.map(c=>(c||[]).split(";").map(h=>(([i,r])=>({lng:i,lat:r}))(h.split(",").map(i=>+i))))})}}},ye={key:0};function _e(t,n,e,o,c,h){const i=w.resolveComponent("bm-polygon");return c.paths.length?(w.openBlock(),w.createElementBlock("div",ye,[(w.openBlock(!0),w.createElementBlock(w.Fragment,null,w.renderList(c.paths,(r,s)=>(w.openBlock(),w.createBlock(i,{key:s,path:r,"stroke-color":e.strokeColor,"stroke-weight":e.strokeWeight,"stroke-opacity":e.strokeOpacity,"stroke-style":e.strokeStyle,"fill-opacity":e.fillOpacity,"fill-color":e.fillColor,"mass-clear":e.massClear,clicking:e.clicking,onClick:n[0]||(n[0]=a=>t.$emit("click",a)),onDblclick:n[1]||(n[1]=a=>t.$emit("dblclick",a)),onMousedown:n[2]||(n[2]=a=>t.$emit("mousedown",a)),onMouseup:n[3]||(n[3]=a=>t.$emit("mouseup",a)),onMouseout:n[4]||(n[4]=a=>t.$emit("mouseout",a)),onMouseover:n[5]||(n[5]=a=>t.$emit("mouseover",a)),onRemove:n[6]||(n[6]=a=>t.$emit("remove",a))},null,8,["path","stroke-color","stroke-weight","stroke-opacity","stroke-style","fill-opacity","fill-color","mass-clear","clicking"]))),128))])):w.createCommentVNode("",!0)}var $t=R(fe,[["render",_e]]);const ve={name:"bm-autocomplete",mixins:[B()],emits:["update:modelValue","searchcomplete"],props:{types:{type:String},location:{type:String},sugStyle:{type:Object,default(){return{}}},modelValue:{}},watch:{types(){this.reload()},location(){this.reload()}},methods:{load(){const{BMap:t,map:n,$el:e,types:o,location:c,sugStyle:h}=this,i=e.querySelector("input");!i||(this.originInstance=new t.Autocomplete({input:i,types:o,location:c||n,onSearchComplete:r=>{const s=document.querySelectorAll(".tangram-suggestion-main");for(const a of s)for(const p in h)a.style[p]=h[p].toString();this.$emit("searchcomplete",r)}}),this.originInstance.addEventListener("onconfirm",r=>{const s=r.item.value;this.$emit("update:modelValue",s.province+s.city+s.district+s.street+s.business)}),N.call(this,this.originInstance))}}},be=w.createElementVNode("input",null,null,-1);function we(t,n,e,o,c,h){return w.openBlock(),w.createElementBlock("span",null,[w.renderSlot(t.$slots,"default",{},()=>[be])])}var Et=R(ve,[["render",we]]),Pt={exports:{}};(function(t,n){(function(e,o){t.exports=o()})(Z,function(){var e=typeof window!="undefined"?window:typeof Z!="undefined"?Z:this;function o(l,f){return f={exports:{}},l(f,f.exports,e),f.exports}var c=o(function(l,f,y){(function(v,m){typeof f=="object"?l.exports=m():(v.BMapLib=v.BMapLib||{},v.BMapLib.TextIconOverlay=v.BMapLib.TextIconOverlay||m())})(e,function(){var v,m=v=m||{version:"1.3.8"},I={};m.guid="$BAIDU$",I[m.guid]=I[m.guid]||{},m.dom=m.dom||{},m.dom.g=function(d){return typeof d=="string"||d instanceof String?document.getElementById(d):d&&d.nodeName&&(d.nodeType==1||d.nodeType==9)?d:null},m.g=m.G=m.dom.g,m.dom.getDocument=function(d){return d=m.dom.g(d),d.nodeType==9?d:d.ownerDocument||d.document},m.lang=m.lang||{},m.lang.isString=function(d){return Object.prototype.toString.call(d)=="[object String]"},m.isString=m.lang.isString,m.dom._g=function(d){return m.lang.isString(d)?document.getElementById(d):d},m._g=m.dom._g,m.browser=m.browser||{},/msie (\d+\.\d)/i.test(navigator.userAgent)&&(m.browser.ie=m.ie=document.documentMode||+RegExp.$1),m.dom.getComputedStyle=function(d,_){d=m.dom._g(d);var b=m.dom.getDocument(d),C;return b.defaultView&&b.defaultView.getComputedStyle&&(C=b.defaultView.getComputedStyle(d,null),C)?C[_]||C.getPropertyValue(_):""},m.dom._styleFixer=m.dom._styleFixer||{},m.dom._styleFilter=m.dom._styleFilter||[],m.dom._styleFilter.filter=function(d,_,b){for(var C=0,k=m.dom._styleFilter,L;L=k[C];C++)(L=L[b])&&(_=L(d,_));return _},m.string=m.string||{},m.string.toCamelCase=function(d){return d.indexOf("-")<0&&d.indexOf("_")<0?d:d.replace(/[-_][^-_]/g,function(_){return _.charAt(1).toUpperCase()})},m.dom.getStyle=function(d,_){var b=m.dom;d=b.g(d),_=m.string.toCamelCase(_);var C=d.style[_]||(d.currentStyle?d.currentStyle[_]:"")||b.getComputedStyle(d,_);if(!C){var k=b._styleFixer[_];k&&(C=k.get?k.get(d):m.dom.getStyle(d,k))}return(k=b._styleFilter)&&(C=k.filter(_,C,"get")),C},m.getStyle=m.dom.getStyle,/opera\/(\d+\.\d)/i.test(navigator.userAgent)&&(m.browser.opera=+RegExp.$1),m.browser.isWebkit=/webkit/i.test(navigator.userAgent),m.browser.isGecko=/gecko/i.test(navigator.userAgent)&&!/like gecko/i.test(navigator.userAgent),m.browser.isStrict=document.compatMode=="CSS1Compat",m.dom.getPosition=function(d){d=m.dom.g(d);var _=m.dom.getDocument(d),b=m.browser,C=m.dom.getStyle;b.isGecko>0&&_.getBoxObjectFor&&C(d,"position")=="absolute"&&(d.style.top===""||d.style.left);var k={left:0,top:0},L=b.ie&&!b.isStrict?_.body:_.documentElement,M,E;if(d==L)return k;if(d.getBoundingClientRect){E=d.getBoundingClientRect(),k.left=Math.floor(E.left)+Math.max(_.documentElement.scrollLeft,_.body.scrollLeft),k.top=Math.floor(E.top)+Math.max(_.documentElement.scrollTop,_.body.scrollTop),k.left-=_.documentElement.clientLeft,k.top-=_.documentElement.clientTop;var z=_.body,V=parseInt(C(z,"borderLeftWidth")),At=parseInt(C(z,"borderTopWidth"));b.ie&&!b.isStrict&&(k.left-=isNaN(V)?2:V,k.top-=isNaN(At)?2:At)}else{M=d;do{if(k.left+=M.offsetLeft,k.top+=M.offsetTop,b.isWebkit>0&&C(M,"position")=="fixed"){k.left+=_.body.scrollLeft,k.top+=_.body.scrollTop;break}M=M.offsetParent}while(M&&M!=d);for((b.opera>0||b.isWebkit>0&&C(d,"position")=="absolute")&&(k.top-=_.body.offsetTop),M=d.offsetParent;M&&M!=_.body;)k.left-=M.scrollLeft,(!b.opera||M.tagName!="TR")&&(k.top-=M.scrollTop),M=M.offsetParent}return k},m.event=m.event||{},m.event._listeners=m.event._listeners||[],m.event.on=function(d,_,b){_=_.replace(/^on/i,""),d=m.dom._g(d);var C=function(z){b.call(d,z)},k=m.event._listeners,L=m.event._eventFilter,M,E=_;return _=_.toLowerCase(),L&&L[_]&&(M=L[_](d,_,C),E=M.type,C=M.listener),d.addEventListener?d.addEventListener(E,C,!1):d.attachEvent&&d.attachEvent("on"+E,C),k[k.length]=[d,_,b,C,E],d},m.on=m.event.on,function(){var d=I[m.guid];m.lang.guid=function(){return"TANGRAM__"+(d._counter++).toString(36)},d._counter=d._counter||1}(),I[m.guid]._instances=I[m.guid]._instances||{},m.lang.isFunction=function(d){return Object.prototype.toString.call(d)=="[object Function]"},m.lang.Class=function(d){this.guid=d||m.lang.guid(),I[m.guid]._instances[this.guid]=this},I[m.guid]._instances=I[m.guid]._instances||{},m.lang.Class.prototype.dispose=function(){delete I[m.guid]._instances[this.guid];for(var d in this)m.lang.isFunction(this[d])||delete this[d];this.disposed=!0},m.lang.Class.prototype.toString=function(){return"[object "+(this._className||"Object")+"]"},m.lang.Event=function(d,_){this.type=d,this.returnValue=!0,this.target=_||null,this.currentTarget=null},m.lang.Class.prototype.addEventListener=function(d,_,b){if(!!m.lang.isFunction(_)){!this.__listeners&&(this.__listeners={});var C=this.__listeners,k;if(typeof b=="string"&&b){if(/[^\w\-]/.test(b))throw"nonstandard key:"+b;_.hashCode=b,k=b}d.indexOf("on")!=0&&(d="on"+d),typeof C[d]!="object"&&(C[d]={}),k=k||m.lang.guid(),_.hashCode=k,C[d][k]=_}},m.lang.Class.prototype.removeEventListener=function(d,_){if(!(typeof _!="undefined"&&(m.lang.isFunction(_)&&!(_=_.hashCode)||!m.lang.isString(_)))){!this.__listeners&&(this.__listeners={}),d.indexOf("on")!=0&&(d="on"+d);var b=this.__listeners;if(!!b[d])if(typeof _!="undefined")b[d][_]&&delete b[d][_];else for(var C in b[d])delete b[d][C]}},m.lang.Class.prototype.dispatchEvent=function(d,_){m.lang.isString(d)&&(d=new m.lang.Event(d)),!this.__listeners&&(this.__listeners={}),_=_||{};for(var b in _)d[b]=_[b];var b,C=this.__listeners,k=d.type;if(d.target=d.target||this,d.currentTarget=this,k.indexOf("on")!=0&&(k="on"+k),m.lang.isFunction(this[k])&&this[k].apply(this,arguments),typeof C[k]=="object")for(b in C[k])C[k][b].apply(this,arguments);return d.returnValue},m.lang.inherits=function(d,_,b){var C,k,L=d.prototype,M=new Function;M.prototype=_.prototype,k=d.prototype=new M;for(C in L)k[C]=L[C];d.prototype.constructor=d,d.superClass=_.prototype,typeof b=="string"&&(k._className=b)},m.inherits=m.lang.inherits;var O="http://api.map.baidu.com/library/TextIconOverlay/1.2/src/images/m",T="png",x=function(d,_,b){try{BMap}catch{throw Error("Baidu Map JS API is not ready yet!")}v.lang.inherits(x,BMap.Overlay,"TextIconOverlay"),this._position=d,this._text=_,this._options=b||{},this._styles=this._options.styles||[],!this._styles.length&&this._setupDefaultStyles()};return x.prototype._setupDefaultStyles=function(){for(var d=[53,56,66,78,90],_=0,b;b=d[_];_++)this._styles.push({url:O+_+"."+T,size:new BMap.Size(b,b)})},x.prototype.initialize=function(d){return this._map=d,this._domElement=document.createElement("div"),this._updateCss(),this._updateText(),this._updatePosition(),this._bind(),this._map.getPanes().markerMouseTarget.appendChild(this._domElement),this._domElement},x.prototype.draw=function(){this._map&&this._updatePosition()},x.prototype.getText=function(){return this._text},x.prototype.setText=function(d){d&&(!this._text||this._text.toString()!=d.toString())&&(this._text=d,this._updateText(),this._updateCss(),this._updatePosition())},x.prototype.getPosition=function(){return this._position},x.prototype.setPosition=function(d){d&&(!this._position||!this._position.equals(d))&&(this._position=d,this._updatePosition())},x.prototype.getStyleByText=function(d,_){var b=parseInt(d),C=parseInt(b/10);return C=Math.max(0,C),C=Math.min(C,_.length-1),_[C]},x.prototype._updateCss=function(){if(!!this._domElement){var d=this.getStyleByText(this._text,this._styles);this._domElement.style.cssText=this._buildCssText(d)}},x.prototype._updateText=function(){this._domElement&&(this._domElement.innerHTML=this._text)},x.prototype._updatePosition=function(){if(this._domElement&&this._position){var d=this._domElement.style,_=this._map.pointToOverlayPixel(this._position);_.x-=Math.ceil(parseInt(d.width)/2),_.y-=Math.ceil(parseInt(d.height)/2),d.left=_.x+"px",d.top=_.y+"px"}},x.prototype._buildCssText=function(d){var _=d.url,b=d.size,C=d.anchor,k=d.offset,L=d.textColor||"black",M=d.textSize||10,E=[];if(v.browser.ie<7)E.push('filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale,src="'+_+'");');else{E.push("background-image:url("+_+");");var z="0 0";k instanceof BMap.Size&&(z=k.width+"px "+k.height+"px"),E.push("background-position:"+z+";")}return b instanceof BMap.Size&&(C instanceof BMap.Size?(C.height>0&&C.height<b.height&&E.push("height:"+(b.height-C.height)+"px; padding-top:"+C.height+"px;"),C.width>0&&C.width<b.width&&E.push("width:"+(b.width-C.width)+"px; padding-left:"+C.width+"px;")):(E.push("height:"+b.height+"px; line-height:"+b.height+"px;"),E.push("width:"+b.width+"px; text-align:center;"))),E.push("cursor:pointer; color:"+L+"; position:absolute; font-size:"+M+"px; font-family:Arial,sans-serif; font-weight:bold"),E.join("")},x.prototype._bind=function(){if(!this._domElement)return;var d=this,_=this._map,b=v.lang.Event;function C(k,L){var M=k.srcElement||k.target,E=k.clientX||k.pageX,z=k.clientY||k.pageY;if(k&&L&&E&&z&&M){var V=v.dom.getPosition(_.getContainer());L.pixel=new BMap.Pixel(E-V.left,z-V.top),L.point=_.pixelToPoint(L.pixel)}return L}v.event.on(this._domElement,"mouseover",function(k){d.dispatchEvent(C(k,new b("onmouseover")))}),v.event.on(this._domElement,"mouseout",function(k){d.dispatchEvent(C(k,new b("onmouseout")))}),v.event.on(this._domElement,"click",function(k){d.dispatchEvent(C(k,new b("onclick")))})},x})}),h=c&&typeof c=="object"&&"default"in c?c.default:c,i=function(l,f,y){f=r(f);var v=l.pointToPixel(f.getNorthEast()),m=l.pointToPixel(f.getSouthWest());v.x+=y,v.y-=y,m.x-=y,m.y+=y;var I=l.pixelToPoint(v),O=l.pixelToPoint(m);return new BMap.Bounds(O,I)},r=function(l){var f=s(l.getNorthEast().lng,-180,180),y=s(l.getSouthWest().lng,-180,180),v=s(l.getNorthEast().lat,-74,74),m=s(l.getSouthWest().lat,-74,74);return new BMap.Bounds(new BMap.Point(y,m),new BMap.Point(f,v))},s=function(l,f,y){return f&&(l=Math.max(l,f)),y&&(l=Math.min(l,y)),l},a=function(l){return Object.prototype.toString.call(l)==="[object Array]"},p=function(l,f){var y=-1;if(a(f)){if(f.indexOf)y=f.indexOf(l);else for(var v=0,m;m=f[v];v++)if(m===l){y=v;break}}return y},u=function(l,f){try{BMap}catch{throw Error("Baidu Map JS API is not ready yet!")}if(!!l){this._map=l,this._markers=[],this._clusters=[];var y=f||{};this._gridSize=y.gridSize||60,this._maxZoom=y.maxZoom||18,this._minClusterSize=y.minClusterSize||2,this._isAverageCenter=!1,y.isAverageCenter!=null&&(this._isAverageCenter=y.isAverageCenter),this._styles=y.styles||[];var v=this;this._map.addEventListener("zoomend",function(){v._redraw()}),this._map.addEventListener("moveend",function(){v._redraw()});var m=y.markers;a(m)&&this.addMarkers(m)}};u.prototype.addMarkers=function(l){if(!!l.length){for(var f=0,y=l.length;f<y;f++)this._pushMarkerTo(l[f]);this._createClusters()}},u.prototype._pushMarkerTo=function(l){var f=p(l,this._markers);f===-1&&(l.isInCluster=!1,this._markers.push(l))},u.prototype.addMarker=function(l){this._pushMarkerTo(l),this._createClusters()},u.prototype._createClusters=function(){var l=this._map.getBounds();if(!!l.getCenter())for(var f=i(this._map,l,this._gridSize),y=0,v;v=this._markers[y];y++)!v.isInCluster&&f.containsPoint(v.getPosition())&&this._addToClosestCluster(v)},u.prototype._addToClosestCluster=function(l){var f=4e6,y=null;l.getPosition();for(var v=0,m;m=this._clusters[v];v++){var I=m.getCenter();if(I){var O=this._map.getDistance(I,l.getPosition());O<f&&(f=O,y=m)}}if(y&&y.isMarkerInClusterBounds(l))y.addMarker(l);else{var m=new g(this);m.addMarker(l),this._clusters.push(m)}},u.prototype._clearLastClusters=function(){for(var l=0,f;f=this._clusters[l];l++)f.remove();this._clusters=[],this._removeMarkersFromCluster()},u.prototype._removeMarkersFromCluster=function(){for(var l=0,f;f=this._markers[l];l++)f.isInCluster=!1},u.prototype._removeMarkersFromMap=function(){for(var l=0,f;f=this._markers[l];l++){f.isInCluster=!1;var y=f.getLabel();this._map.removeOverlay(f),f.setLabel(y)}},u.prototype._removeMarker=function(l){var f=p(l,this._markers);return f===-1?!1:(this._map.removeOverlay(l),this._markers.splice(f,1),!0)},u.prototype.removeMarker=function(l){var f=this._removeMarker(l);return f&&(this._clearLastClusters(),this._createClusters()),f},u.prototype.removeMarkers=function(l){for(var f=!1,y=0;y<l.length;y++){var v=this._removeMarker(l[y]);f=f||v}return f&&(this._clearLastClusters(),this._createClusters()),f},u.prototype.clearMarkers=function(){this._clearLastClusters(),this._removeMarkersFromMap(),this._markers=[]},u.prototype._redraw=function(){this._clearLastClusters(),this._createClusters()},u.prototype.getGridSize=function(){return this._gridSize},u.prototype.setGridSize=function(l){this._gridSize=l,this._redraw()},u.prototype.getMaxZoom=function(){return this._maxZoom},u.prototype.setMaxZoom=function(l){this._maxZoom=l,this._redraw()},u.prototype.getStyles=function(){return this._styles},u.prototype.setStyles=function(l){this._styles=l,this._redraw()},u.prototype.getMinClusterSize=function(){return this._minClusterSize},u.prototype.setMinClusterSize=function(l){this._minClusterSize=l,this._redraw()},u.prototype.isAverageCenter=function(){return this._isAverageCenter},u.prototype.getMap=function(){return this._map},u.prototype.getMarkers=function(){return this._markers},u.prototype.getClustersCount=function(){for(var l=0,f=0,y;y=this._clusters[f];f++)y.isReal()&&l++;return l};function g(l){this._markerClusterer=l,this._map=l.getMap(),this._minClusterSize=l.getMinClusterSize(),this._isAverageCenter=l.isAverageCenter(),this._center=null,this._markers=[],this._gridBounds=null,this._isReal=!1,this._clusterMarker=new h(this._center,this._markers.length,{styles:this._markerClusterer.getStyles()})}return g.prototype.addMarker=function(l){if(this.isMarkerInCluster(l))return!1;if(!this._center)this._center=l.getPosition(),this.updateGridBounds();else if(this._isAverageCenter){var f=this._markers.length+1,y=(this._center.lat*(f-1)+l.getPosition().lat)/f,v=(this._center.lng*(f-1)+l.getPosition().lng)/f;this._center=new BMap.Point(v,y),this.updateGridBounds()}l.isInCluster=!0,this._markers.push(l);var m=this._markers.length;if(m<this._minClusterSize)return this._map.addOverlay(l),!0;if(m===this._minClusterSize)for(var I=0;I<m;I++){var O=this._markers[I].getLabel();this._markers[I].getMap()&&this._map.removeOverlay(this._markers[I]),this._markers[I].setLabel(O)}return this._map.addOverlay(this._clusterMarker),this._isReal=!0,this.updateClusterMarker(),!0},g.prototype.isMarkerInCluster=function(l){if(this._markers.indexOf)return this._markers.indexOf(l)!=-1;for(var f=0,y;y=this._markers[f];f++)if(y===l)return!0;return!1},g.prototype.isMarkerInClusterBounds=function(l){return this._gridBounds.containsPoint(l.getPosition())},g.prototype.isReal=function(l){return this._isReal},g.prototype.updateGridBounds=function(){var l=new BMap.Bounds(this._center,this._center);this._gridBounds=i(this._map,l,this._markerClusterer.getGridSize())},g.prototype.updateClusterMarker=function(){if(this._map.getZoom()>this._markerClusterer.getMaxZoom()){this._clusterMarker&&this._map.removeOverlay(this._clusterMarker);for(var l=0,f;f=this._markers[l];l++)this._map.addOverlay(f);return}if(this._markers.length<this._minClusterSize){this._clusterMarker.hide();return}this._clusterMarker.setPosition(this._center),this._clusterMarker.setText(this._markers.length),this._clusterMarker.addEventListener&&!this._clusterMarker._hasClickEvent&&this._clusterMarker.addEventListener("click",function(y){this._clusterMarker._hasClickEvent=!0,this._markers&&this._map.setViewport(this.getBounds())}.bind(this))},g.prototype.remove=function(){for(var l=0;this._markers[l];l++){var f=this._markers[l].getLabel();this._markers[l].getMap()&&this._map.removeOverlay(this._markers[l]),this._markers[l].setLabel(f)}this._map.removeOverlay(this._clusterMarker),this._markers.length=0,delete this._markers},g.prototype.getBounds=function(){for(var l=new BMap.Bounds(this._center,this._center),f=0,y;y=this._markers[f];f++)l.extend(y.getPosition());return l},g.prototype.getCenter=function(){return this._center},u})})(Pt);var Ce=Pt.exports;const X=[],ke={name:"bml-marker-clusterer",mixins:[B("markerClusterer")],provide(){return{Cluster:this}},props:{gridSize:{type:Object},maxZoom:{type:Number},minClusterSize:{type:Number},styles:{type:Array,default(){return[]}},averageCenter:{type:Boolean,default:!1}},data(){return{}},watch:{gridSize:{handler(t){const{BMap:n,originInstance:e}=this;e.setGridSize(n,t.map)},deep:!0},maxZoom(t){const{originInstance:n}=this;n.setMaxZoom(t)},minClusterSize:{handler(t){const{BMap:n,originInstance:e}=this;e.setMinClusterSize(P(n,t))},deep:!0},styles:{handler(t){const{BMap:n,originInstance:e}=this,o=JSON.parse(JSON.stringify(t)).map(c=>(c.size=c.size&&P(n,c.size),c));e.setStyles(o)},deep:!0},averageCenter(t){this.reload()}},methods:{load(){const{BMap:t,map:n,gridSize:e,minClusterSize:o,maxZoom:c,styles:h,averageCenter:i}=this;this.originInstance=new Ce(n,{gridSize:e&&P(t,e),maxZoom:c,minClusterSize:o&&P(t,o),styles:h.map(r=>(r.size=P(t,r.size),r)),isAverageCenter:i}),this.$nextTick(()=>{const r=X.map(s=>s.originInstance).filter(s=>s instanceof t.Marker);this.originInstance.addMarkers(r)})},addMaker(t){X.push(t)},removeMaker(t){X.splice(X.indexOf(t),1)}},beforeCreate(){this.preventChildrenRender=!0}};function Ie(t,n,e,o,c,h){return w.openBlock(),w.createElementBlock("span",null,[w.renderSlot(t.$slots,"default")])}var Se=R(ke,[["render",Ie]]),Tt={exports:{}};(function(t,n){(function(e,o){t.exports=o()})(Z,function(){var e={};e.dom={},e.dom.g=function(i){return typeof i=="string"||i instanceof String?document.getElementById(i):i&&i.nodeName&&(i.nodeType==1||i.nodeType==9)?i:null},e.g=e.G=e.dom.g,e.lang=e.lang||{},e.lang.isString=function(i){return Object.prototype.toString.call(i)=="[object String]"},e.isString=e.lang.isString,e.dom._g=function(i){return e.lang.isString(i)?document.getElementById(i):i},e._g=e.dom._g,e.dom.getDocument=function(i){return i=e.dom.g(i),i.nodeType==9?i:i.ownerDocument||i.document},e.browser=e.browser||{},e.browser.ie=e.ie=/msie (\d+\.\d+)/i.test(navigator.userAgent)?document.documentMode||+RegExp.$1:void 0,e.dom.getComputedStyle=function(i,r){i=e.dom._g(i);var s=e.dom.getDocument(i),a;return s.defaultView&&s.defaultView.getComputedStyle&&(a=s.defaultView.getComputedStyle(i,null),a)?a[r]||a.getPropertyValue(r):""},e.dom._styleFixer=e.dom._styleFixer||{},e.dom._styleFilter=e.dom._styleFilter||[],e.dom._styleFilter.filter=function(i,r,s){for(var a=0,p=e.dom._styleFilter,u;u=p[a];a++)(u=u[s])&&(r=u(i,r));return r},e.string=e.string||{},e.string.toCamelCase=function(i){return i.indexOf("-")<0&&i.indexOf("_")<0?i:i.replace(/[-_][^-_]/g,function(r){return r.charAt(1).toUpperCase()})},e.dom.getStyle=function(i,r){var s=e.dom;i=s.g(i),r=e.string.toCamelCase(r);var a=i.style[r]||(i.currentStyle?i.currentStyle[r]:"")||s.getComputedStyle(i,r);if(!a){var p=s._styleFixer[r];p&&(a=p.get?p.get(i):e.dom.getStyle(i,p))}return(p=s._styleFilter)&&(a=p.filter(r,a,"get")),a},e.getStyle=e.dom.getStyle,e.dom._NAME_ATTRS=function(){var i={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",usemap:"useMap",frameborder:"frameBorder"};return e.browser.ie<8?(i.for="htmlFor",i.class="className"):(i.htmlFor="for",i.className="class"),i}(),e.dom.setAttr=function(i,r,s){return i=e.dom.g(i),r=="style"?i.style.cssText=s:(r=e.dom._NAME_ATTRS[r]||r,i.setAttribute(r,s)),i},e.setAttr=e.dom.setAttr,e.dom.setAttrs=function(i,r){i=e.dom.g(i);for(var s in r)e.dom.setAttr(i,s,r[s]);return i},e.setAttrs=e.dom.setAttrs,e.dom.create=function(i,r){var s=document.createElement(i),a=r||{};return e.dom.setAttrs(s,a)},e.object=e.object||{},e.extend=e.object.extend=function(i,r){for(var s in r)r.hasOwnProperty(s)&&(i[s]=r[s]);return i};var o=function(i,r,s){try{BMap}catch{throw Error("Baidu Map JS API is not ready yet!")}!r||r.length<1||(this._map=i,this._path=r,this.i=0,this._setTimeoutQuene=[],this._projection=this._map.getMapType().getProjection(),this._opts={icon:null,speed:4e3,defaultContent:"",showInfoWindow:!1},this._setOptions(s),this._rotation=0,!this._opts.icon instanceof BMap.Icon&&(this._opts.icon=defaultIcon))};o.prototype._setOptions=function(i){if(!!i)for(var r in i)i.hasOwnProperty(r)&&(this._opts[r]=i[r])},o.prototype.start=function(){var i=this,r=i._path.length;if(this._opts.onstart&&this._opts.onstart(i),i.i&&i.i<r-1)if(i._fromPause)i._fromStop||i._moveNext(++i.i);else return;else!i._marker&&i._addMarker(),i._timeoutFlag=setTimeout(function(){!i._overlay&&i._addInfoWin(),i._moveNext(i.i)},400);this._fromPause=!1,this._fromStop=!1},o.prototype.stop=function(){this.i=0,this._fromStop=!0,clearInterval(this._intervalFlag),this._clearTimeout();for(var i=0,r=this._opts.landmarkPois,s=r.length;i<s;i++)r[i].bShow=!1;this._opts.onstop&&this._opts.onstop(this)},o.prototype.pause=function(){clearInterval(this._intervalFlag),this._fromPause=!0,this._clearTimeout(),this._opts.onpause&&this._opts.onpause(this)},o.prototype.hideInfoWindow=function(){this._opts.showInfoWindow=!1,this._overlay&&(this._overlay._div.style.visibility="hidden")},o.prototype.showInfoWindow=function(){this._opts.showInfoWindow=!0,this._overlay&&(this._overlay._div.style.visibility="visible")},o.prototype.dispose=function(){clearInterval(this._intervalFlag),this._setTimeoutQuene&&this._clearTimeout(),this._map&&(this._map.removeOverlay(this._overlay),this._map.removeOverlay(this._marker))},e.object.extend(o.prototype,{_addMarker:function(i){this._marker&&(this.stop(),this._map.removeOverlay(this._marker),clearTimeout(this._timeoutFlag)),this._overlay&&this._map.removeOverlay(this._overlay);var r=new BMap.Marker(this._path[0]);this._opts.icon&&r.setIcon(this._opts.icon),this._map.addOverlay(r),r.setAnimation(BMAP_ANIMATION_DROP),this._marker=r},_addInfoWin:function(){var i=this;!c.prototype.initialize&&h();var r=new c(i._marker.getPosition(),i._opts.defaultContent);r.setRelatedClass(this),this._overlay=r,this._map.addOverlay(r),this._opts.showInfoWindow?this.showInfoWindow():this.hideInfoWindow()},_getMercator:function(i){return this._map.getMapType().getProjection().lngLatToPoint(i)},_getDistance:function(i,r){return Math.sqrt(Math.pow(i.x-r.x,2)+Math.pow(i.y-r.y,2))},_move:function(i,r,s){var a=this,p=0,u=10,g=this._opts.speed/(1e3/u),l=this._projection.lngLatToPoint(i),f=this._projection.lngLatToPoint(r),y=Math.round(a._getDistance(l,f)/g);if(y<1){a._moveNext(++a.i);return}a._intervalFlag=setInterval(function(){if(p>=y){if(clearInterval(a._intervalFlag),a.i>a._path.length)return;a._moveNext(++a.i)}else{p++;var v=s(l.x,f.x,p,y),m=s(l.y,f.y,p,y),I=a._projection.pointToLngLat(new BMap.Pixel(v,m));if(p==1){var O=null;a.i-1>=0&&(O=a._path[a.i-1]),a._opts.enableRotation==!0&&a.setRotation(O,i,r),a._opts.autoView&&(a._map.getBounds().containsPoint(I)||a._map.setCenter(I))}a._marker.setPosition(I),a._setInfoWin(I)}},u)},setRotation:function(i,r,s){var a=this,p=0;if(r=a._map.pointToPixel(r),s=a._map.pointToPixel(s),s.x!=r.x){var u=(s.y-r.y)/(s.x-r.x),g=Math.atan(u);p=g*360/(2*Math.PI),s.x<r.x?p=-p+90+90:p=-p,a._marker.setRotation(-p)}else{var l=s.y-r.y,f=0;l>0?f=-1:f=1,a._marker.setRotation(-f*90)}},linePixellength:function(i,r){return Math.sqrt(Math.abs(i.x-r.x)*Math.abs(i.x-r.x)+Math.abs(i.y-r.y)*Math.abs(i.y-r.y))},pointToPoint:function(i,r){return Math.abs(i.x-r.x)*Math.abs(i.x-r.x)+Math.abs(i.y-r.y)*Math.abs(i.y-r.y)},_moveNext:function(i){var r=this;i<this._path.length-1?r._move(r._path[i],r._path[i+1],r._tween.linear):r.stop()},_setInfoWin:function(i){var r=this;r._overlay.setPosition(i,r._marker.getIcon().size);var s=r._troughPointIndex(i);s!=-1?(clearInterval(r._intervalFlag),r._overlay.setHtml(r._opts.landmarkPois[s].html),r._overlay.setPosition(i,r._marker.getIcon().size),r._pauseForView(s)):r._overlay.setHtml(r._opts.defaultContent)},_pauseForView:function(i){var r=this,s=setTimeout(function(){r._moveNext(++r.i)},r._opts.landmarkPois[i].pauseTime*1e3);r._setTimeoutQuene.push(s)},_clearTimeout:function(){for(var i in this._setTimeoutQuene)clearTimeout(this._setTimeoutQuene[i]);this._setTimeoutQuene.length=0},_tween:{linear:function(i,r,s,a){var p=i,u=r-i,g=s,l=a;return u*g/l+p}},_troughPointIndex:function(i){for(var r=this._opts.landmarkPois,s,a=0,p=r.length;a<p;a++)if(!r[a].bShow&&(s=this._map.getDistance(new BMap.Point(r[a].lng,r[a].lat),i),s<10))return r[a].bShow=!0,a;return-1}});function c(i,r){this._point=i,this._html=r}function h(){c.prototype=new BMap.Overlay,c.prototype.initialize=function(i){var r=this._div=e.dom.create("div",{style:"border:solid 1px #ccc;width:auto;min-width:50px;text-align:center;position:absolute;background:#fff;color:#000;font-size:12px;border-radius: 10px;padding:5px;white-space: nowrap;"});return r.innerHTML=this._html,i.getPanes().floatPane.appendChild(r),this._map=i,r},c.prototype.draw=function(){this.setPosition(this.lushuMain._marker.getPosition(),this.lushuMain._marker.getIcon().size)},e.object.extend(c.prototype,{setPosition:function(i,r){var s=this._map.pointToOverlayPixel(i),a=e.dom.getStyle(this._div,"width"),p=e.dom.getStyle(this._div,"height"),u=parseInt(this._div.clientWidth||a,10);parseInt(this._div.clientHeight||p,10),this._div.style.left=s.x-u/2+"px",this._div.style.bottom=-(s.y-r.height)+"px"},setHtml:function(i){this._div.innerHTML=i},setRelatedClass:function(i){this.lushuMain=i}})}return o})})(Tt);var Me=Tt.exports;const Be={name:"bm-lushu",render(t){},emits:["start","stop","pause"],mixins:[B("lushu")],props:{path:{type:Array,default:[]},landmarkPois:{type:Array,default(){return[]}},icon:{type:Object},speed:{type:Number,default:4e3},content:{type:String,default:""},autoView:{type:Boolean,default:!1},rotation:{type:Boolean,default:!1},infoWindow:{type:Boolean,default:!0},play:{type:Boolean,default:!0}},watch:{path:{handler(t){this.reload()},deep:!0},landmarkPois:{handler(t){this.reload()},deep:!0},icon:{handler(t){const{originInstance:n,content:e}=this,o=G(BMap,t);n._opts.icon=o,n._marker=o},deep:!0},speed(t){const{originInstance:n,content:e}=this;n._opts.speed=t},content(t){const{originInstance:n,infoWindow:e}=this;t&&e?n.showInfoWindow():n.hideInfoWindow(),n._opts.defaultContent=t,n._overlay&&n._overlay.setHtml(t)},autoView(t){const{originInstance:n,content:e}=this;n._opts.autoView=t},rotation(t){const{originInstance:n,content:e}=this;n._opts.enableRotation=t},infoWindow(t){const{originInstance:n,content:e}=this;n&&t&&e?n.showInfoWindow():n.hideInfoWindow()},play(t){const{originInstance:n}=this;t&&n?n.start():!this._isEnd&&n.pause()}},methods:{load(){const{BMap:t,map:n,path:e,landmarkPois:o,icon:c,speed:h,content:i,autoView:r,rotation:s,infoWindow:a,play:p}=this,u=this.originInstance=new Me(n,e,{enableRotation:s,landmarkPois:o,showInfoWindow:a,defaultContent:i,icon:c&&G(t,c),speed:h,autoView:r,onstart:g=>{this._isEnd=!1,this.$emit("start")},onstop:g=>{this._isEnd=!0,this.$emit("stop")},onpause:g=>this.$emit("pause")});p&&e.length&&u.start(this),e.length&&(i&&a?u.showInfoWindow():u.hideInfoWindow())}}};var Lt={exports:{}};(function(t,n){(function(e,o){t.exports=o()})(Z,function(){function e(h,i,r){var s,a,p=h.prototype,u=new Function;u.prototype=i.prototype,a=h.prototype=new u;for(s in p)a[s]=p[s];h.prototype.constructor=h,h.superClass=i.prototype,typeof r=="string"&&(a._className=r)}var o=function(){var h=function(a){var p={data:[],heatmap:a};this.max=1,this.get=function(u){return p[u]},this.set=function(u,g){p[u]=g}};h.prototype={addDataPoint:function(s,a){if(!(s<0||a<0)){var p=this,u=p.get("heatmap"),g=p.get("data");if(g[s]||(g[s]=[]),g[s][a]||(g[s][a]=0),g[s][a]+=arguments.length<3?1:arguments[2],p.set("data",g),p.max<g[s][a]){u.get("actx").clearRect(0,0,u.get("width"),u.get("height")),p.setDataSet({max:g[s][a],data:g},!0);return}u.drawAlpha(s,a,g[s][a],!0)}},setDataSet:function(s,a){var p=this,u=p.get("heatmap"),g=[],l=s.data,f=l.length;if(u.clear(),this.max=s.max,u.get("legend")&&u.get("legend").update(s.max),a!=null&&a){for(var y in l)if(y!==void 0)for(var v in l[y])v!==void 0&&u.drawAlpha(y,v,l[y][v],!1)}else for(;f--;){var m=l[f];u.drawAlpha(m.x,m.y,m.count,!1),g[m.x]||(g[m.x]=[]),g[m.x][m.y]||(g[m.x][m.y]=0),g[m.x][m.y]=m.count}u.colorize(),this.set("data",l)},exportDataSet:function(){var s=this,a=s.get("data"),p=[];for(var u in a)if(u!==void 0)for(var g in a[u])g!==void 0&&p.push({x:parseInt(u,10),y:parseInt(g,10),count:a[u][g]});return{max:s.max,data:p}},generateRandomDataSet:function(s){var a=this.get("heatmap"),p=a.get("width"),u=a.get("height"),g={},l=Math.floor(Math.random()*1e3+1);g.max=l;for(var f=[];s--;)f.push({x:Math.floor(Math.random()*p+1),y:Math.floor(Math.random()*u+1),count:Math.floor(Math.random()*l+1)});g.data=f,this.setDataSet(g)}};var i=function(a){this.config=a;var p={element:null,labelsEl:null,gradientCfg:null,ctx:null};this.get=function(u){return p[u]},this.set=function(u,g){p[u]=g},this.init()};i.prototype={init:function(){var s=this,a=s.config,p=a.title||"Legend",u=a.position,g=a.offset||10;a.gradient;var l=document.createElement("ul"),f,y,v="";s.processGradientObject(),u.indexOf("t")>-1?v+="top:"+g+"px;":v+="bottom:"+g+"px;",u.indexOf("l")>-1?v+="left:"+g+"px;":v+="right:"+g+"px;",f=document.createElement("div"),f.style.cssText="border-radius:5px;position:absolute;"+v+"font-family:Helvetica; width:256px;z-index:10000000000; background:rgba(255,255,255,1);padding:10px;border:1px solid black;margin:0;",f.innerHTML="<h3 style='padding:0;margin:0;text-align:center;font-size:16px;'>"+p+"</h3>",l.style.cssText="position:relative;font-size:12px;display:block;list-style:none;list-style-type:none;margin:0;height:15px;",y=document.createElement("div"),y.style.cssText=["position:relative;display:block;width:256px;height:15px;border-bottom:1px solid black; background-image:url(",s.createGradientImage(),");"].join(""),f.appendChild(l),f.appendChild(y),s.set("element",f),s.set("labelsEl",l),s.update(1)},processGradientObject:function(){var s=this,a=this.config.gradient,p=[];for(var u in a)a.hasOwnProperty(u)&&p.push({stop:u,value:a[u]});p.sort(function(g,l){return g.stop-l.stop}),p.unshift({stop:0,value:"rgba(0,0,0,0)"}),s.set("gradientArr",p)},createGradientImage:function(){var s=this,a=s.get("gradientArr"),p=a.length,u=document.createElement("canvas"),g=u.getContext("2d"),l;u.width="256",u.height="15",l=g.createLinearGradient(0,5,256,10);for(var f=0;f<p;f++)l.addColorStop(1/(p-1)*f,a[f].value);g.fillStyle=l,g.fillRect(0,5,256,10),g.strokeStyle="black",g.beginPath();for(var f=0;f<p;f++)g.moveTo((1/(p-1)*f*256>>0)+.5,0),g.lineTo((1/(p-1)*f*256>>0)+.5,f==0?15:5);return g.moveTo(255.5,0),g.lineTo(255.5,15),g.moveTo(255.5,4.5),g.lineTo(0,4.5),g.stroke(),s.set("ctx",g),u.toDataURL()},getElement:function(){return this.get("element")},update:function(s){for(var a=this,p=a.get("gradientArr"),u=a.get("ctx"),g=a.get("labelsEl"),l,f="",y,v=0;v<p.length;v++)l=s*p[v].stop>>0,y=u.measureText(l).width/2>>0,v==0&&(y=0),v==p.length-1&&(y*=2),f+='<li style="position:absolute;left:'+(((1/(p.length-1)*v*256||0)>>0)-y+.5)+'px">'+l+"</li>";g.innerHTML=f}};var r=function(a){var p={radius:40,element:{},canvas:{},acanvas:{},ctx:{},actx:{},legend:null,visible:!0,width:0,height:0,max:!1,gradient:!1,opacity:180,premultiplyAlpha:!1,bounds:{l:1e3,r:0,t:1e3,b:0},debug:!1};this.store=new h(this),this.get=function(u){return p[u]},this.set=function(u,g){p[u]=g},this.configure(a),this.init()};return r.prototype={configure:function(s){var a=this;if(a.set("radius",s.radius||40),a.set("element",s.element instanceof Object?s.element:document.getElementById(s.element)),a.set("visible",s.visible!=null?s.visible:!0),a.set("max",s.max||!1),a.set("gradient",s.gradient||{.45:"rgb(0,0,255)",.55:"rgb(0,255,255)",.65:"rgb(0,255,0)",.95:"yellow",1:"rgb(255,0,0)"}),a.set("opacity",parseInt(255/(100/s.opacity),10)||180),a.set("width",s.width||0),a.set("height",s.height||0),a.set("debug",s.debug),s.legend){var p=s.legend;p.gradient=a.get("gradient"),a.set("legend",new i(p))}},resize:function(){var s=this,a=s.get("element"),p=s.get("canvas"),u=s.get("acanvas");p.width=u.width=s.get("width")||a.style.width.replace(/px/,"")||s.getWidth(a),this.set("width",p.width),p.height=u.height=s.get("height")||a.style.height.replace(/px/,"")||s.getHeight(a),this.set("height",p.height)},init:function(){var s=this,a=document.createElement("canvas"),p=document.createElement("canvas"),u=a.getContext("2d"),g=p.getContext("2d"),l=s.get("element");s.initColorPalette(),s.set("canvas",a),s.set("ctx",u),s.set("acanvas",p),s.set("actx",g),s.resize(),a.style.cssText=p.style.cssText="position:absolute;top:0;left:0;z-index:10000000;",s.get("visible")||(a.style.display="none"),l.appendChild(a),s.get("legend")&&l.appendChild(s.get("legend").getElement()),s.get("debug")&&document.body.appendChild(p),g.shadowOffsetX=15e3,g.shadowOffsetY=15e3,g.shadowBlur=15},initColorPalette:function(){var s=this,a=document.createElement("canvas"),p=s.get("gradient"),u,g,l;a.width="1",a.height="256",u=a.getContext("2d"),g=u.createLinearGradient(0,0,1,256),l=u.getImageData(0,0,1,1),l.data[0]=l.data[3]=64,l.data[1]=l.data[2]=0,u.putImageData(l,0,0),l=u.getImageData(0,0,1,1),s.set("premultiplyAlpha",l.data[0]<60||l.data[0]>70);for(var f in p)g.addColorStop(f,p[f]);u.fillStyle=g,u.fillRect(0,0,1,256),s.set("gradient",u.getImageData(0,0,1,256).data)},getWidth:function(s){var a=s.offsetWidth;return s.style.paddingLeft&&(a+=s.style.paddingLeft),s.style.paddingRight&&(a+=s.style.paddingRight),a},getHeight:function(s){var a=s.offsetHeight;return s.style.paddingTop&&(a+=s.style.paddingTop),s.style.paddingBottom&&(a+=s.style.paddingBottom),a},colorize:function(s,a){var p=this,u=p.get("width"),g=p.get("radius"),l=p.get("height"),f=p.get("actx"),y=p.get("ctx"),v=g*3,m=p.get("premultiplyAlpha"),I=p.get("gradient"),O=p.get("opacity"),T=p.get("bounds"),x,d,_,b,C,k,L,M,E;s!=null&&a!=null?(s+v>u&&(s=u-v),s<0&&(s=0),a<0&&(a=0),a+v>l&&(a=l-v),x=s,d=a,b=s+v,_=a+v):(T.l<0?x=0:x=T.l,T.r>u?b=u:b=T.r,T.t<0?d=0:d=T.t,T.b>l?_=l:_=T.b),C=f.getImageData(x,d,b-x,_-d),k=C.data.length;for(var z=3;z<k;z+=4)L=C.data[z],M=L*4,!!M&&(E=L<O?L:O,C.data[z-3]=I[M],C.data[z-2]=I[M+1],C.data[z-1]=I[M+2],m&&(C.data[z-3]/=255/E,C.data[z-2]/=255/E,C.data[z-1]/=255/E),C.data[z]=E);y.putImageData(C,x,d)},drawAlpha:function(s,a,p,u){var g=this,l=g.get("radius"),f=g.get("actx");g.get("max");var y=g.get("bounds"),v=s-1.5*l>>0,m=a-1.5*l>>0,I=s+1.5*l>>0,O=a+1.5*l>>0;f.shadowColor="rgba(0,0,0,"+(p?p/g.store.max:"0.1")+")",f.shadowOffsetX=15e3,f.shadowOffsetY=15e3,f.shadowBlur=15,f.beginPath(),f.arc(s-15e3,a-15e3,l,0,Math.PI*2,!0),f.closePath(),f.fill(),u?g.colorize(v,m):(v<y.l&&(y.l=v),m<y.t&&(y.t=m),I>y.r&&(y.r=I),O>y.b&&(y.b=O))},toggleDisplay:function(){var s=this,a=s.get("visible"),p=s.get("canvas");a?p.style.display="none":p.style.display="block",s.set("visible",!a)},getImageData:function(){return this.get("canvas").toDataURL()},clear:function(){var s=this,a=s.get("width"),p=s.get("height");s.store.set("data",[]),s.get("ctx").clearRect(0,0,a,p),s.get("actx").clearRect(0,0,a,p)},cleanup:function(){var s=this;s.get("element").removeChild(s.get("canvas"))}},{create:function(s){return new r(s)},util:{mousePosition:function(s){var a,p;if(s.layerX?(a=s.layerX,p=s.layerY):s.offsetX&&(a=s.offsetX,p=s.offsetY),typeof a!="undefined")return[a,p]}}}}(),c=function(h){try{BMap}catch{throw Error("Baidu Map JS API is not ready yet!")}if(!c._isExtended){c._isExtended=!0,e(c,BMap.Overlay,"HeatmapOverlay");var i=new c(h);this.__proto__=i.__proto__}this.conf=h,this.heatmap=null,this.latlngs=[],this.bounds=null,this._moveendHandler=this._moveendHandler.bind(this)};return c.prototype.initialize=function(h){this._map=h;var i=document.createElement("div");return i.style.position="absolute",i.style.top=0,i.style.left=0,i.style.border=0,i.style.width=this._map.getSize().width+"px",i.style.height=this._map.getSize().height+"px",this.conf.element=i,h.getPanes().mapPane.appendChild(i),this.heatmap=o.create(this.conf),this._div=i,i},c.prototype.draw=function(){var h=this._map.getBounds();if(!h.equals(this.bounds)){this.bounds=h;var i=this._map.pointToOverlayPixel(h.getNorthEast()),r=this._map.pointToOverlayPixel(h.getSouthWest());if(!(!i||!r)){var s=i.y,a=r.x,p=r.y-i.y,u=i.x-r.x;if(this.conf.element.style.left=a+"px",this.conf.element.style.top=s+"px",this.conf.element.style.width=u+"px",this.conf.element.style.height=p+"px",this.heatmap.store.get("heatmap").resize(),this.latlngs.length>0){this.heatmap.clear();for(var g=this.latlngs.length,l={max:this.heatmap.store.max,data:[]};g--;){var f=this.latlngs[g].latlng;if(!!h.containsPoint(f)){var y=this._map.pointToOverlayPixel(f),v=new BMap.Pixel(y.x-a,y.y-s),m=this.pixelTransform(v);l.data.push({x:m.x,y:m.y,count:this.latlngs[g].c})}}this.heatmap.store.setDataSet(l)}}}},c.prototype.pixelTransform=function(h){for(var i=this.heatmap.get("width"),r=this.heatmap.get("height");h.x<0;)h.x+=i;for(;h.x>i;)h.x-=i;for(;h.y<0;)h.y+=r;for(;h.y>r;)h.y-=r;return h.x=h.x>>0,h.y=h.y>>0,h},c.prototype._moveendHandler=function(h){this.setDataSet(this._data),delete this._data,this._map.removeEventListener("moveend",this._moveendHandler)},c.prototype.setDataSet=function(h){if(!!this._map){var i=this._map.getBounds(),r=this._map.pointToOverlayPixel(i.getNorthEast()),s=this._map.pointToOverlayPixel(i.getSouthWest());(!r||!s)&&(this._data=h,this._map.addEventListener("moveend",this._moveendHandler));var a={max:h.max,data:[]},p=h.data,u=p.length;for(this.latlngs=[];u--;){var g=new BMap.Point(p[u].lng,p[u].lat);if(this.latlngs.push({latlng:g,c:p[u].count}),!!i.containsPoint(g)){var l=this._map.pointToOverlayPixel(g),f=this._map.pointToOverlayPixel(i.getSouthWest()).x,y=this._map.pointToOverlayPixel(i.getNorthEast()).y,v=new BMap.Pixel(l.x-f,l.y-y),m=this.pixelTransform(v);a.data.push({x:m.x,y:m.y,count:p[u].count})}}this.heatmap.clear(),this.heatmap.store.setDataSet(a)}},c.prototype.addDataPoint=function(h,i,r){var s=new BMap.Point(h,i),a=this.pixelTransform(this._map.pointToOverlayPixel(s));this.heatmap.store.addDataPoint(a.x,a.y,r),this.latlngs.push({latlng:s,c:r})},c.prototype.toggle=function(){this.heatmap.toggleDisplay()},c})})(Lt);var xe=Lt.exports;const Oe={name:"bml-heatmap",render(){},mixins:[B("overlay")],props:{data:{type:Array,default:Array},max:{type:Number},radius:{type:Number},gradient:{type:Object},opacity:{type:Number}},watch:{data:{handler(){this.reload()},deep:!0},max(){this.reload()},radius(t){const{originInstance:n,opacity:e,gradient:o}=this;n.setOptions({radius:t,opacity:e,gradient:o})},gradient:{handler(t){const{originInstance:n,radius:e,opacity:o}=this;n.setOptions({radius:e,opacity:o,gradient:t})},deep:!0},opacity(t){const{originInstance:n,radius:e,gradient:o}=this;n.setOptions({radius:e,opacity:t,gradient:o})}},methods:{load(){const{map:t,data:n,max:e,radius:o,opacity:c,gradient:h}=this,i=this.originInstance=new xe({radius:o,opacity:c,gradient:h});t.addOverlay(i),i.setDataSet({data:n,max:e})}}};var zt={exports:{}};(function(t,n){(function(e,o){t.exports=o()})(Z,function(){function e(h,i){try{BMap}catch{throw Error("Baidu Map JS API is not ready yet!")}var r=o(h),s=new BMap.Polyline(r,i);return s.addEventListener("lineupdate",function(){this.isEditing&&this.enableEditing()}),s.cornerPoints=h,s.editMarkers=[],s.enableEditing=function(){var a=this;if(a.map){a.disableEditing();for(var p=0;p<a.cornerPoints.length;p++){var u=new BMap.Marker(a.cornerPoints[p],{icon:new BMap.Icon("http://api.map.baidu.com/library/CurveLine/1.5/src/circle.png",new BMap.Size(16,16)),enableDragging:!0,raiseOnDrag:!0});u.addEventListener("dragend",function(){a.cornerPoints.length=0;for(var g=0;g<a.editMarkers.length;g++)a.cornerPoints.push(a.editMarkers[g].getPosition());var l=o(a.cornerPoints);a.setPath(l)}),u.index=p,a.editMarkers.push(u),a.map.addOverlay(u)}}a.isEditing=!0},s.disableEditing=function(){this.isEditing=!1;for(var a=0;a<this.editMarkers.length;a++)this.map.removeOverlay(this.editMarkers[a]),this.editMarkers[a]=null;this.editMarkers.length=0},s.getPath=function(){return r},s}function o(h){for(var i=[],r=0;r<h.length-1;r++){var s=c(h[r],h[r+1]);s&&s.length>0&&(i=i.concat(s))}return i}function c(h,i){var r=[];if(!h||!i||!(h instanceof BMap.Point)||!(i instanceof BMap.Point))return null;var s=function(b){return 1-2*b+b*b},a=function(b){return 2*b-2*b*b},p=function(b){return b*b},u=30,g,l,f,y,v,m,I=0,O=0;if(typeof i=="undefined"){typeof r!="undefined"&&(r=[]);return}var T=parseFloat(h.lat),x=parseFloat(i.lat),d=parseFloat(h.lng),_=parseFloat(i.lng);for(_>d&&parseFloat(_-d)>180&&d<0&&(d=parseFloat(180+180+d)),d>_&&parseFloat(d-_)>180&&_<0&&(_=parseFloat(180+180+_)),m=0,x==T?(g=0,l=d-_):_==d?(g=Math.PI/2,l=T-x):(g=Math.atan((x-T)/(_-d)),l=(x-T)/Math.sin(g)),m==0&&(m=g+Math.PI/5),f=l/2,v=f*Math.cos(m)+d,y=f*Math.sin(m)+T,I=0;I<u+1;I++)r.push(new BMap.Point(d*s(O)+v*a(O)+_*p(O),T*s(O)+y*a(O)+x*p(O))),O=O+1/u;return r}return e})})(zt);var $e=zt.exports;const Ee=["click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","lineupdate"],Pe={name:"bml-curve-line",render(){},mixins:[B("overlay")],props:{points:{type:Array,default:Array},strokeColor:{type:String},strokeWeight:{type:Number},strokeOpacity:{type:Number},strokeStyle:{type:String},massClear:{type:Boolean,default:!0},clicking:{type:Boolean,default:!0},editing:{type:Boolean,default:!1}},watch:{points:{handler(t,n){this.originInstance.disableEditing(),this.reload()},deep:!0},strokeColor(t){this.originInstance.setStrokeColor(t)},strokeOpacity(t){this.originInstance.setStrokeOpacity(t)},strokeWeight(t){this.originInstance.setStrokeWeight(t)},strokeStyle(t){this.originInstance.setStrokeStyle(t)},editing(t){t?this.originInstance.enableEditing():this.originInstance.disableEditing()},massClear(t){t?this.originInstance.enableMassClear():this.originInstance.disableMassClear()},clicking(t){this.reload()}},methods:{load(){const{BMap:t,map:n,points:e,strokeColor:o,strokeWeight:c,strokeOpacity:h,strokeStyle:i,editing:r,massClear:s,clicking:a}=this,p=new $e(e.map(u=>$(t,u)),{strokeColor:o,strokeWeight:c,strokeOpacity:h,strokeStyle:i,enableMassClear:s,enableClicking:a});r?p.enableEditing():p.disableEditing(),this.originInstance=p,n.addOverlay(p),N.call(this,p,Ee)}}};var Te={install(t,n={}){nt(n),t.component("baidu-map",it),t.component("bm-scale",ot),t.component("bm-navigation",st),t.component("bm-map-type",at),t.component("bm-overview-map",rt),t.component("bm-geolocation",lt),t.component("bm-copyright",ct),t.component("bm-city-list",ht),t.component("bm-panorama",pt),t.component("bm-control",dt),t.component("bm-marker",ut),t.component("bm-point-collection",mt),t.component("bm-polyline",gt),t.component("bm-polygon",tt),t.component("bm-circle",ft),t.component("bm-ground",yt),t.component("bm-label",_t),t.component("bm-info-window",vt),t.component("bm-overlay",bt),t.component("bm-context-menu",wt),t.component("bm-context-menu-item",Ct),t.component("bm-local-search",kt),t.component("bm-transit",It),t.component("bm-walking",St),t.component("bm-driving",Mt),t.component("bm-bus",Bt),t.component("bm-tile",xt),t.component("bm-traffic",Ot),t.component("bm-auto-complete",Et),t.component("bm-boundary",$t)}};S.BaiduMap=it,S.BmAutoComplete=Et,S.BmBoundary=$t,S.BmBus=Bt,S.BmCircle=ft,S.BmCityList=ht,S.BmContextMenu=wt,S.BmContextMenuItem=Ct,S.BmControl=dt,S.BmCopyright=ct,S.BmDriving=Mt,S.BmGeolocation=lt,S.BmGround=yt,S.BmInfoWindow=vt,S.BmLabel=_t,S.BmLocalSearch=kt,S.BmMapType=at,S.BmMarker=ut,S.BmNavigation=st,S.BmOverlay=bt,S.BmOverviewMap=rt,S.BmPanorama=pt,S.BmPointCollection=mt,S.BmPolygon=tt,S.BmPolyline=gt,S.BmScale=ot,S.BmTile=xt,S.BmTraffic=Ot,S.BmTransit=It,S.BmWalking=St,S.BmlCurveLine=Pe,S.BmlHeatmap=Oe,S.BmlLushu=Be,S.BmlMarkerClusterer=Se,S.default=Te,Object.defineProperty(S,"__esModule",{value:!0}),S[Symbol.toStringTag]="Module"});
